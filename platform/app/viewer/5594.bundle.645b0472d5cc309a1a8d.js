"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5594],{21370:(e,t,n)=>{n.d(t,{VS:()=>nr,H2:()=>ur,h7:()=>Ln,ER:()=>Er,yX:()=>y,Gc:()=>Go});var o=n(36870);function r(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=r(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var i=n(44051),s=n(21423),a=n(38842);const d={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},l=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],c=["Enter"," ","Escape"];var u,g,h;!function(e){e.Strict="strict",e.Loose="loose"}(u||(u={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(g||(g={})),function(e){e.Partial="partial",e.Full="full"}(h||(h={}));const p={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var m,f,y;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(m||(m={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(f||(f={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(y||(y={}));const x={[y.Left]:y.Right,[y.Right]:y.Left,[y.Top]:y.Bottom,[y.Bottom]:y.Top};function w(e){return null===e?null:e?"valid":"invalid"}const S=e=>"id"in e&&"source"in e&&"target"in e,b=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),v=(e,t=[0,0])=>{const{width:n,height:o}=q(e),r=e.origin??t,i=n*r[0],s=o*r[1];return{x:e.position.x-i,y:e.position.y-s}},C=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const o="string"==typeof n;let r=t.nodeLookup||o?void 0:n;t.nodeLookup&&(r=o?t.nodeLookup.get(n):b(n)?n:t.nodeLookup.get(n.id));const i=r?V(r,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return L(e,i)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return $(n)},E=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=V(e);n=L(n,t)}})),$(n)},k=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1)=>{const a={...W(t,[n,o,r]),width:t.width/r,height:t.height/r},d=[];for(const t of e.values()){const{measured:e,selectable:n=!0,hidden:o=!1}=t;if(s&&!n||o)continue;const r=e.width??t.width??t.initialWidth??null,l=e.height??t.height??t.initialHeight??null,c=H(a,_(t)),u=(r??0)*(l??0),g=i&&c>0;(!t.internals.handleBounds||g||c>=u||t.dragging)&&d.push(t)}return d},N=(e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))};function M(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!(e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden))||o&&!o.has(e.id)||n.set(e.id,e)})),n}async function P({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},s){if(0===e.size)return Promise.resolve(!1);const a=E(e),d=K(a,t,n,s?.minZoom??r,s?.maxZoom??i,s?.padding??.1);return await o.setViewport(d,{duration:s?.duration}),Promise.resolve(!0)}function O({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??o;let g=r;if("parent"!==s.extent||s.expandParent)a&&U(s.extent)&&(g=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);else if(a){const e=a.measured.width,t=a.measured.height;e&&t&&(g=[[l,c],[l+e,c+t]])}else i?.("005",d.error005());const h=U(g)?D(t,g,s.measured):t;return{position:{x:h.x-l+s.measured.width*u[0],y:h.y-c+s.measured.height*u[1]},positionAbsolute:h}}const I=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),D=(e={x:0,y:0},t,n)=>({x:I(e.x,t[0][0],t[1][0]-(n?.width??0)),y:I(e.y,t[0][1],t[1][1]-(n?.height??0))});function z(e,t,n){const{width:o,height:r}=q(n),{x:i,y:s}=n.internals.positionAbsolute;return D(e,[[i,s],[i+o,s+r]],t)}const R=(e,t,n)=>e<t?I(Math.abs(e-t),1,t)/t:e>n?-I(Math.abs(e-n),1,t)/t:0,A=(e,t,n=15,o=40)=>[R(e.x,o,t.width-o)*n,R(e.y,o,t.height-o)*n],L=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),B=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),$=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),_=(e,t=[0,0])=>{const{x:n,y:o}=b(e)?e.internals.positionAbsolute:v(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},V=(e,t=[0,0])=>{const{x:n,y:o}=b(e)?e.internals.positionAbsolute:v(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},j=(e,t)=>$(L(B(e),B(t))),H=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},T=e=>Z(e.width)&&Z(e.height)&&Z(e.x)&&Z(e.y),Z=e=>!isNaN(e)&&isFinite(e),Y=(e,t)=>{0},X=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),W=({x:e,y:t},[n,o,r],i=!1,s=[1,1])=>{const a={x:(e-n)/r,y:(t-o)/r};return i?X(a,s):a},F=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),K=(e,t,n,o,r,i)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),d=Math.min(s,a),l=I(d,o,r);return{x:t/2-(e.x+e.width/2)*l,y:n/2-(e.y+e.height/2)*l,zoom:l}},G=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function U(e){return void 0!==e&&"parent"!==e}function q(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Q(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function J(e,t={width:0,height:0},n,o,r){const i={...e},s=o.get(n);if(s){const e=s.origin||r;i.x+=s.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}function ee(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:s}=se(e),a=W({x:i-(r?.left??0),y:s-(r?.top??0)},o),{x:d,y:l}=n?X(a,t):a;return{xSnapped:d,ySnapped:l,...a}}const te=e=>({width:e.offsetWidth,height:e.offsetHeight}),ne=e=>e.getRootNode?.()||window?.document,oe=["INPUT","SELECT","TEXTAREA"];function re(e){const t=e.composedPath?.()?.[0]||e.target;return oe.includes(t?.nodeName)||t?.hasAttribute?.("contenteditable")||!!t?.closest(".nokey")}const ie=e=>"clientX"in e,se=(e,t)=>{const n=ie(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},ae=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...te(t)}})):null};function de({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const d=.125*e+.375*r+.375*s+.125*n,l=.125*t+.375*i+.375*a+.125*o;return[d,l,Math.abs(d-e),Math.abs(l-t)]}function le(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function ce({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case y.Left:return[t-le(t-o,i),n];case y.Right:return[t+le(o-t,i),n];case y.Top:return[t,n-le(n-r,i)];case y.Bottom:return[t,n+le(r-n,i)]}}function ue({sourceX:e,sourceY:t,sourcePosition:n=y.Bottom,targetX:o,targetY:r,targetPosition:i=y.Top,curvature:s=.25}){const[a,d]=ce({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[l,c]=ce({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[u,g,h,p]=de({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:d,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${d} ${l},${c} ${o},${r}`,u,g,h,p]}function ge({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2;return[i,o<t?o+s:o-s,r,s]}function he({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=L(V(e),V(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return H(s,$(i))>0}const pe=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`;function me({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,a]=ge({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,a]}const fe={[y.Left]:{x:-1,y:0},[y.Right]:{x:1,y:0},[y.Top]:{x:0,y:-1},[y.Bottom]:{x:0,y:1}},ye=({source:e,sourcePosition:t=y.Bottom,target:n})=>t===y.Left||t===y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},xe=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function we({sourceX:e,sourceY:t,sourcePosition:n=y.Bottom,targetX:o,targetY:r,targetPosition:i=y.Top,borderRadius:s=5,centerX:a,centerY:d,offset:l=20}){const[c,u,g,h,p]=function({source:e,sourcePosition:t=y.Bottom,target:n,targetPosition:o=y.Top,center:r,offset:i}){const s=fe[t],a=fe[o],d={x:e.x+s.x*i,y:e.y+s.y*i},l={x:n.x+a.x*i,y:n.y+a.y*i},c=ye({source:d,sourcePosition:t,target:l}),u=0!==c.x?"x":"y",g=c[u];let h,p,m=[];const f={x:0,y:0},x={x:0,y:0},[w,S,b,v]=ge({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[u]*a[u]==-1){h=r.x??w,p=r.y??S;const e=[{x:h,y:d.y},{x:h,y:l.y}],t=[{x:d.x,y:p},{x:l.x,y:p}];m=s[u]===g?"x"===u?e:t:"x"===u?t:e}else{const r=[{x:d.x,y:l.y}],c=[{x:l.x,y:d.y}];if(m="x"===u?s.x===g?c:r:s.y===g?r:c,t===o){const t=Math.abs(e[u]-n[u]);if(t<=i){const o=Math.min(i-1,i-t);s[u]===g?f[u]=(d[u]>e[u]?-1:1)*o:x[u]=(l[u]>n[u]?-1:1)*o}}if(t!==o){const e="x"===u?"y":"x",t=s[u]===a[e],n=d[e]>l[e],o=d[e]<l[e];(1===s[u]&&(!t&&n||t&&o)||1!==s[u]&&(!t&&o||t&&n))&&(m="x"===u?r:c)}const y={x:d.x+f.x,y:d.y+f.y},w={x:l.x+x.x,y:l.y+x.y};Math.max(Math.abs(y.x-m[0].x),Math.abs(w.x-m[0].x))>=Math.max(Math.abs(y.y-m[0].y),Math.abs(w.y-m[0].y))?(h=(y.x+w.x)/2,p=m[0].y):(h=m[0].x,p=(y.y+w.y)/2)}return[[e,{x:d.x+f.x,y:d.y+f.y},...m,{x:l.x+x.x,y:l.y+x.y},n],h,p,b,v]}({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:d},offset:l});return[c.reduce(((e,t,n)=>{let o="";return o=n>0&&n<c.length-1?function(e,t,n,o){const r=Math.min(xe(e,t)/2,xe(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s)return`L ${i+r*(e.x<n.x?-1:1)},${s}Q ${i},${s} ${i},${s+r*(e.y<n.y?1:-1)}`;const a=e.x<n.x?1:-1;return`L ${i},${s+r*(e.y<n.y?-1:1)}Q ${i},${s} ${i+r*a},${s}`}(c[n-1],t,c[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),""),u,g,h,p]}function Se(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function be(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,"source"===o.type?t.push(o):"target"===o.type&&n.push(o);return{source:t,target:n}}function ve(e,t,n=y.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??q(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case y.Top:return{x:r+s/2,y:i};case y.Right:return{x:r+s,y:i+a/2};case y.Bottom:return{x:r+s/2,y:i+a};case y.Left:return{x:r,y:i+a/2}}}function Ce(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function Ee(e,t){if(!e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}function ke(e,t,n,o,r){let i=.5;"start"===r?i=0:"end"===r&&(i=1);let s=[(e.x+e.width*i)*t.zoom+t.x,e.y*t.zoom+t.y-o],a=[-100*i,-100];switch(n){case y.Right:s=[(e.x+e.width)*t.zoom+t.x+o,(e.y+e.height*i)*t.zoom+t.y],a=[0,-100*i];break;case y.Bottom:s[1]=(e.y+e.height)*t.zoom+t.y+o,a[1]=0;break;case y.Left:s=[e.x*t.zoom+t.x-o,(e.y+e.height*i)*t.zoom+t.y],a=[-100,-100*i]}return`translate(${s[0]}px, ${s[1]}px) translate(${a[0]}%, ${a[1]}%)`}const Ne={nodeOrigin:[0,0],nodeExtent:l,elevateNodesOnSelect:!0,defaults:{}},Me={...Ne,checkEquality:!0};function Pe(e,t){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function Oe(e,t,n,o){const r=Pe(Me,o),i=new Map(t),s=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const a of e){let e=i.get(a.id);if(r.checkEquality&&a===e?.internals.userNode)t.set(a.id,e);else{const n=v(a,r.nodeOrigin),o=U(a.extent)?a.extent:r.nodeExtent,i=D(n,o,q(a));e={...r.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:i,handleBounds:a.measured?e?.internals.handleBounds:void 0,z:De(a,s),userNode:a}},t.set(a.id,e)}a.parentId&&Ie(e,t,n,o)}}function Ie(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=Pe(Ne,o),a=e.parentId,d=t.get(a);if(!d)return void console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const l=r?1e3:0,{x:c,y:u,z:g}=function(e,t,n,o,r){const{x:i,y:s}=t.internals.positionAbsolute,a=q(e),d=v(e,n),l=U(e.extent)?D(d,e.extent,a):d;let c=D({x:i+l.x,y:s+l.y},o,a);"parent"===e.extent&&(c=z(c,a,t));const u=De(e,r),g=t.internals.z??0;return{x:c.x,y:c.y,z:g>u?g:u}}(e,d,i,s,l),{positionAbsolute:h}=e.internals,p=c!==h.x||u!==h.y;(p||g!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:p?{x:c,y:u}:h,z:g})}function De(e,t){return(Z(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function ze(e,t,n,o=[0,0]){const r=[],i=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const o=i.get(n.parentId)?.expandedRect??_(e),r=j(o,n.rect);i.set(n.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach((({expandedRect:t,parent:i},s)=>{const a=i.internals.positionAbsolute,d=q(i),l=i.origin??o,c=t.x<a.x?Math.round(Math.abs(a.x-t.x)):0,u=t.y<a.y?Math.round(Math.abs(a.y-t.y)):0,g=Math.max(d.width,Math.round(t.width)),h=Math.max(d.height,Math.round(t.height)),p=(g-d.width)*l[0],m=(h-d.height)*l[1];(c>0||u>0||p||m)&&(r.push({id:s,type:"position",position:{x:i.position.x-c+p,y:i.position.y-u+m}}),n.get(s)?.forEach((t=>{e.some((e=>e.id===t.id))||r.push({id:t.id,type:"position",position:{x:t.position.x+c,y:t.position.y+u}})}))),(d.width<t.width||d.height<t.height||c||u)&&r.push({id:s,type:"dimensions",setAttributes:!0,dimensions:{width:g+(c?l[0]*c-p:0),height:h+(u?l[1]*u-m:0)}})})),r}function Re(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:r,sourceHandle:i=null,targetHandle:s=null}=o,a=`${n}-source-${i}`,d=`${r}-target-${s}`,l=e.get(a)||new Map,c=e.get(d)||new Map,u={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:s};t.set(o.id,o),e.set(a,l.set(`${r}-${s}`,u)),e.set(d,c.set(`${n}-${i}`,u))}}function Ae(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Ae(n,t))}function Le(e,t,n){let o=e;do{if(o?.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Be({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[e,i]of t){const t=n.get(e)?.internals.userNode;t&&r.push({...t,position:i.position,dragging:o})}if(!e)return[r[0],r];const i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:o}:r[0],r]}function $e({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let a={x:null,y:null},d=0,l=new Map,c=!1,u={x:0,y:0},g=null,h=!1,p=null,m=!1;return{update:function({noDragClassName:f,handleSelector:y,domNode:x,isSelectable:w,nodeId:S,nodeClickDistance:b=0}){function v({x:e,y:n},r){const{nodeLookup:i,nodeExtent:s,snapGrid:d,snapToGrid:c,nodeOrigin:u,onNodeDrag:g,onSelectionDrag:h,onError:p,updateNodePositions:m}=t();a={x:e,y:n};let f=!1,y={x:0,y:0,x2:0,y2:0};if(l.size>1&&s){const e=E(l);y=B(e)}for(const[t,o]of l){if(!i.has(t))continue;let r={x:e-o.distance.x,y:n-o.distance.y};c&&(r=X(r,d));let a=[[s[0][0],s[0][1]],[s[1][0],s[1][1]]];if(l.size>1&&s&&!o.extent){const{positionAbsolute:e}=o.internals,t=e.x-y.x+s[0][0],n=e.x+o.measured.width-y.x2+s[1][0];a=[[t,e.y-y.y+s[0][1]],[n,e.y+o.measured.height-y.y2+s[1][1]]]}const{position:g,positionAbsolute:h}=O({nodeId:t,nextPosition:r,nodeLookup:i,nodeExtent:a,nodeOrigin:u,onError:p});f=f||o.position.x!==g.x||o.position.y!==g.y,o.position=g,o.internals.positionAbsolute=h}if(f&&(m(l,!0),r&&(o||g||!S&&h))){const[e,t]=Be({nodeId:S,dragItems:l,nodeLookup:i});o?.(r,l,e,t),g?.(r,e,t),S||h?.(r,t)}}async function C(){if(!g)return;const{transform:e,panBy:n,autoPanSpeed:o}=t(),[r,i]=A(u,g,o);0===r&&0===i||(a.x=(a.x??0)-r/e[2],a.y=(a.y??0)-i/e[2],await n({x:r,y:i})&&v(a,null)),d=requestAnimationFrame(C)}function k(o){const{nodeLookup:r,multiSelectionActive:i,nodesDraggable:s,transform:d,snapGrid:c,snapToGrid:u,selectNodesOnDrag:p,onNodeDragStart:m,onSelectionDragStart:f,unselectNodesAndEdges:y}=t();h=!0,p&&w||i||!S||r.get(S)?.selected||y(),w&&p&&S&&e?.(S);const x=ee(o.sourceEvent,{transform:d,snapGrid:c,snapToGrid:u,containerBounds:g});if(a=x,l=function(e,t,n,o){const r=new Map;for(const[i,s]of e)if((s.selected||s.id===o)&&(!s.parentId||!Ae(s,e))&&(s.draggable||t&&void 0===s.draggable)){const t=e.get(i);t&&r.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return r}(r,s,x,S),l.size>0&&(n||m||!S&&f)){const[e,t]=Be({nodeId:S,dragItems:l,nodeLookup:r});n?.(o.sourceEvent,l,e,t),m?.(o.sourceEvent,e,t),S||f?.(o.sourceEvent,t)}}p=(0,s.Lt)(x);const N=(0,i.$E)().clickDistance(b).on("start",(e=>{const{domNode:n,nodeDragThreshold:o,transform:r,snapGrid:i,snapToGrid:s}=t();g=n?.getBoundingClientRect()||null,m=!1,0===o&&k(e);const d=ee(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:s,containerBounds:g});a=d,u=se(e.sourceEvent,g)})).on("drag",(e=>{const{autoPanOnNodeDrag:n,transform:o,snapGrid:r,snapToGrid:i,nodeDragThreshold:s,nodeLookup:d}=t(),p=ee(e.sourceEvent,{transform:o,snapGrid:r,snapToGrid:i,containerBounds:g});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||S&&!d.has(S))&&(m=!0),!m){if(!c&&n&&h&&(c=!0,C()),!h){const t=p.xSnapped-(a.x??0),n=p.ySnapped-(a.y??0);Math.sqrt(t*t+n*n)>s&&k(e)}(a.x!==p.xSnapped||a.y!==p.ySnapped)&&l&&h&&(u=se(e.sourceEvent,g),v(p,e.sourceEvent))}})).on("end",(e=>{if(h&&!m&&(c=!1,h=!1,cancelAnimationFrame(d),l.size>0)){const{nodeLookup:n,updateNodePositions:o,onNodeDragStop:i,onSelectionDragStop:s}=t();if(o(l,!1),r||i||!S&&s){const[t,o]=Be({nodeId:S,dragItems:l,nodeLookup:n,dragging:!1});r?.(e.sourceEvent,l,t,o),i?.(e.sourceEvent,t,o),S||s?.(e.sourceEvent,o)}}})).filter((e=>{const t=e.target;return!e.button&&(!f||!Le(t,`.${f}`,x))&&(!y||Le(t,y,x))}));p.call(N)},destroy:function(){p?.on(".drag",null)}}}const _e=250;function Ve(e,t,n,o){let r=[],i=1/0;const s=function(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())H(r,_(e))>0&&o.push(e);return o}(e,n,t+_e);for(const n of s){const s=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const a of s){if(o.nodeId===a.nodeId&&o.type===a.type&&o.id===a.id)continue;const{x:s,y:d}=ve(n,a,a.position,!0),l=Math.sqrt(Math.pow(s-e.x,2)+Math.pow(d-e.y,2));l>t||(l<i?(r=[{...a,x:s,y:d}],i=l):l===i&&r.push({...a,x:s,y:d}))}}if(!r.length)return null;if(r.length>1){const e="source"===o.type?"target":"source";return r.find((t=>t.type===e))??r[0]}return r[0]}function je(e,t,n,o,r,i=!1){const s=o.get(e);if(!s)return null;const a="strict"===r?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],d=(n?a?.find((e=>e.id===n)):a?.[0])??null;return d&&i?{...d,...ve(s,d,d.position,!0)}:d}function He(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const Te=()=>!0;function Ze(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:d,isValidConnection:l=Te,nodeLookup:c}){const g="target"===i,h=t?s.querySelector(`.${a}-flow__handle[data-id="${d}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:p,y:m}=se(e),f=s.elementFromPoint(p,m),y=f?.classList.contains(`${a}-flow__handle`)?f:h,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const e=He(void 0,y),t=y.getAttribute("data-nodeid"),i=y.getAttribute("data-handleid"),s=y.classList.contains("connectable"),a=y.classList.contains("connectableend");if(!t||!e)return x;const d={source:g?t:o,sourceHandle:g?i:r,target:g?o:t,targetHandle:g?r:i};x.connection=d;const h=s&&a&&(n===u.Strict?g&&"source"===e||!g&&"target"===e:t!==o||i!==r);x.isValid=h&&l(d),x.toHandle=je(t,e,i,c,n,!1)}return x}const Ye={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:d,lib:l,autoPanOnConnect:c,flowId:u,panBy:g,cancelConnection:h,onConnectStart:p,onConnect:m,onConnectEnd:f,isValidConnection:w=Te,onReconnectEnd:S,updateConnection:b,getTransform:v,getFromHandle:C,autoPanSpeed:E}){const k=ne(e.target);let N,M=0;const{x:P,y:O}=se(e),I=k?.elementFromPoint(P,O),D=He(i,I),z=a?.getBoundingClientRect();if(!z||!D)return;const R=je(r,D,o,d,t);if(!R)return;let L=se(e,z),B=!1,$=null,_=!1,V=null;function j(){if(!c||!z)return;const[e,t]=A(L,z,E);g({x:e,y:t}),M=requestAnimationFrame(j)}const H={...R,nodeId:r,type:D,position:R.position},T=d.get(r),Z={inProgress:!0,isValid:null,from:ve(T,H,y.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:T,to:L,toHandle:null,toPosition:x[H.position],toNode:null};b(Z);let Y=Z;function X(e){if(!C()||!H)return void K(e);const i=v();L=se(e,z),N=Ve(W(L,i,!1,[1,1]),n,d,H),B||(j(),B=!0);const a=Ze(e,{handle:N,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:w,doc:k,lib:l,flowId:u,nodeLookup:d});V=a.handleDomNode,$=a.connection,_=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!N,a.isValid);const c={...Y,isValid:_,to:N&&_?F({x:N.x,y:N.y},i):L,toHandle:a.toHandle,toPosition:_&&a.toHandle?a.toHandle.position:x[H.position],toNode:a.toHandle?d.get(a.toHandle.nodeId):null};_&&N&&Y.toHandle&&c.toHandle&&Y.toHandle.type===c.toHandle.type&&Y.toHandle.nodeId===c.toHandle.nodeId&&Y.toHandle.id===c.toHandle.id&&Y.to.x===c.to.x&&Y.to.y===c.to.y||(b(c),Y=c)}function K(e){(N||V)&&$&&_&&m?.($);const{inProgress:t,...n}=Y,o={...n,toPosition:Y.toHandle?Y.toPosition:null};f?.(e,o),i&&S?.(e,o),h(),cancelAnimationFrame(M),B=!1,_=!1,$=null,V=null,k.removeEventListener("mousemove",X),k.removeEventListener("mouseup",K),k.removeEventListener("touchmove",X),k.removeEventListener("touchend",K)}p?.(e,{nodeId:r,handleId:o,handleType:D}),k.addEventListener("mousemove",X),k.addEventListener("mouseup",K),k.addEventListener("touchmove",X),k.addEventListener("touchend",K)},isValid:Ze};const Xe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,We=e=>({x:e.x,y:e.y,zoom:e.k}),Fe=({x:e,y:t,zoom:n})=>a.GS.translate(e,t).scale(n),Ke=(e,t)=>e.target.closest(`.${t}`),Ge=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Ue=(e,t=0,n=(()=>{}))=>{const o="number"==typeof t&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},qe=e=>{const t=e.ctrlKey&&G()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function Qe({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:d,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:u}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),m=(0,a.s_)().clickDistance(!Z(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),f=(0,s.Lt)(e).call(m);b({x:i.x,y:i.y,zoom:I(i.zoom,t,n)},[[0,0],[p.width,p.height]],r);const y=f.on("wheel.zoom"),x=f.on("dblclick.zoom");function w(e,t){return f?new Promise((n=>{m?.transform(Ue(f,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function S(){m.on("zoom",null)}async function b(e,t,n){const o=Fe(e),r=m?.constrain()(o,t,n);return r&&await w(r),new Promise((e=>e(r)))}return m.wheelDelta(qe),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:o,panOnScroll:r,panOnDrag:i,panOnScrollMode:a,panOnScrollSpeed:p,preventScrolling:w,zoomOnPinch:b,zoomOnScroll:v,zoomOnDoubleClick:C,zoomActivationKeyPressed:E,lib:k,onTransformChange:N}){o&&!h.isZoomingOrPanning&&S();const M=r&&!E&&!o?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:d,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Ke(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(u.ctrlKey&&a){const e=(0,s.Wn)(u),t=qe(u),r=h*Math.pow(2,t);return void o.scaleTo(n,r,e,u)}const p=1===u.deltaMode?20:1;let m=r===g.Vertical?0:u.deltaX*p,f=r===g.Horizontal?0:u.deltaY*p;!G()&&u.shiftKey&&r!==g.Vertical&&(m=u.deltaY*p,f=0),o.translateBy(n,-m/h*i,-f/h*i,{internal:!0});const y=We(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,d?.(u,y)),e.isPanScrolling&&(l?.(u,y),e.panScrollTimeout=setTimeout((()=>{c?.(u,y),e.isPanScrolling=!1}),150))}}({zoomPanValues:h,noWheelClassName:e,d3Selection:f,d3Zoom:m,panOnScrollMode:a,panOnScrollSpeed:p,zoomOnPinch:b,onPanZoomStart:l,onPanZoom:d,onPanZoomEnd:c}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){if(!t&&"wheel"===o.type&&!o.ctrlKey||Ke(o,e))return null;o.preventDefault(),n.call(this,o,r)}}({noWheelClassName:e,preventScrolling:w,d3ZoomHandler:y});if(f.on("wheel.zoom",M,{passive:!1}),!o){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=We(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,"mousedown"===o.sourceEvent?.type&&t(!0),n&&n?.(o.sourceEvent,r)}}({zoomPanValues:h,onDraggingChange:u,onPanZoomStart:l});m.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{e.usedRightMouseButton=!(!n||!Ge(t,e.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,We(i.transform))}}({zoomPanValues:h,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:d,onTransformChange:N});m.on("zoom",t);const o=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&Ge(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Xe(e.prevViewport,s.transform))){const t=We(s.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout((()=>{r?.(s.sourceEvent,t)}),n?150:0)}}}({zoomPanValues:h,panOnDrag:i,panOnScroll:r,onPaneContextMenu:n,onPanZoomEnd:c,onDraggingChange:u});m.on("end",o)}const P=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:d,lib:l}){return c=>{const u=e||t,g=n&&c.ctrlKey;if(1===c.button&&"mousedown"===c.type&&(Ke(c,`${l}-flow__node`)||Ke(c,`${l}-flow__edge`)))return!0;if(!(o||u||r||i||n))return!1;if(s)return!1;if(Ke(c,a)&&"wheel"===c.type)return!1;if(Ke(c,d)&&("wheel"!==c.type||r&&"wheel"===c.type&&!e))return!1;if(!n&&c.ctrlKey&&"wheel"===c.type)return!1;if(!n&&"touchstart"===c.type&&c.touches?.length>1)return c.preventDefault(),!1;if(!u&&!r&&!g&&"wheel"===c.type)return!1;if(!o&&("mousedown"===c.type||"touchstart"===c.type))return!1;if(Array.isArray(o)&&!o.includes(c.button)&&"mousedown"===c.type)return!1;const h=Array.isArray(o)&&o.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||"wheel"===c.type)&&h}}({zoomActivationKeyPressed:E,panOnDrag:i,zoomOnScroll:v,panOnScroll:r,zoomOnDoubleClick:C,zoomOnPinch:b,userSelectionActive:o,noPanClassName:t,noWheelClassName:e,lib:k});m.filter(P),C?f.on("dblclick.zoom",x):f.on("dblclick.zoom",null)},destroy:S,setViewport:async function(e,t){const n=Fe(e);return await w(n,t),new Promise((e=>e(n)))},setViewportConstrained:b,getViewport:function(){const e=f?(0,a._V)(f.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return f?new Promise((n=>{m?.scaleTo(Ue(f,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return f?new Promise((n=>{m?.scaleBy(Ue(f,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){m?.scaleExtent(e)},setTranslateExtent:function(e){m?.translateExtent(e)},syncViewport:function(e){if(f){const t=Fe(e),n=f.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||m?.transform(f,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Z(e)||e<0?0:e;m?.clickDistance(t)}}}var Je;!function(e){e.Line="line",e.Handle="handle"}(Je||(Je={}));function et(e,t){return Math.max(0,t-e)}function tt(e,t){return Math.max(0,e-t)}function nt(e,t,n){return Math.max(0,t-e,e-n)}function ot(e,t){return e?!t:t}const rt={width:0,height:0,x:0,y:0},it={...rt,pointerX:0,pointerY:0,aspectRatio:1};function st(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,d=n[1]*s;return[[o-a,r-d],[o+i-a,r+s-d]]}function at({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const a=(0,s.Lt)(e);return{update:function({controlPosition:e,boundaries:s,keepAspectRatio:d,onResizeStart:l,onResize:c,onResizeEnd:u,shouldResize:g}){let h={...rt},p={...it};const m=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let f,y,x,w,S=null,b=[];const v=(0,i.$E)().on("start",(e=>{const{nodeLookup:o,transform:r,snapGrid:i,snapToGrid:s,nodeOrigin:a,paneDomNode:d}=n();if(f=o.get(t),!f)return;S=d?.getBoundingClientRect()??null;const{xSnapped:c,ySnapped:u}=ee(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:s,containerBounds:S});h={width:f.measured.width??0,height:f.measured.height??0,x:f.position.x??0,y:f.position.y??0},p={...h,pointerX:c,pointerY:u,aspectRatio:h.width/h.height},y=void 0,f.parentId&&("parent"===f.extent||f.expandParent)&&(y=o.get(f.parentId),x=y&&"parent"===f.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(y):void 0),b=[],w=void 0;for(const[e,n]of o)if(n.parentId===t&&(b.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=st(n,f,n.origin??a);w=w?[[Math.min(e[0][0],w[0][0]),Math.min(e[0][1],w[0][1])],[Math.max(e[1][0],w[1][0]),Math.max(e[1][1],w[1][1])]]:e}l?.(e,{...h})})).on("drag",(e=>{const{transform:t,snapGrid:r,snapToGrid:i,nodeOrigin:a}=n(),l=ee(e.sourceEvent,{transform:t,snapGrid:r,snapToGrid:i,containerBounds:S}),u=[];if(!f)return;const{x:v,y:C,width:E,height:k}=h,N={},M=f.origin??a,{width:P,height:O,x:I,y:D}=function(e,t,n,o,r,i,s,a){let{affectsX:d,affectsY:l}=t;const{isHorizontal:c,isVertical:u}=t,g=c&&u,{xSnapped:h,ySnapped:p}=n,{minWidth:m,maxWidth:f,minHeight:y,maxHeight:x}=o,{x:w,y:S,width:b,height:v,aspectRatio:C}=e;let E=Math.floor(c?h-e.pointerX:0),k=Math.floor(u?p-e.pointerY:0);const N=b+(d?-E:E),M=v+(l?-k:k),P=-i[0]*b,O=-i[1]*v;let I=nt(N,m,f),D=nt(M,y,x);if(s){let e=0,t=0;d&&E<0?e=et(w+E+P,s[0][0]):!d&&E>0&&(e=tt(w+N+P,s[1][0])),l&&k<0?t=et(S+k+O,s[0][1]):!l&&k>0&&(t=tt(S+M+O,s[1][1])),I=Math.max(I,e),D=Math.max(D,t)}if(a){let e=0,t=0;d&&E>0?e=tt(w+E,a[0][0]):!d&&E<0&&(e=et(w+N,a[1][0])),l&&k>0?t=tt(S+k,a[0][1]):!l&&k<0&&(t=et(S+M,a[1][1])),I=Math.max(I,e),D=Math.max(D,t)}if(r){if(c){const e=nt(N/C,y,x)*C;if(I=Math.max(I,e),s){let e=0;e=!d&&!l||d&&!l&&g?tt(S+O+N/C,s[1][1])*C:et(S+O+(d?E:-E)/C,s[0][1])*C,I=Math.max(I,e)}if(a){let e=0;e=!d&&!l||d&&!l&&g?et(S+N/C,a[1][1])*C:tt(S+(d?E:-E)/C,a[0][1])*C,I=Math.max(I,e)}}if(u){const e=nt(M*C,m,f)/C;if(D=Math.max(D,e),s){let e=0;e=!d&&!l||l&&!d&&g?tt(w+M*C+P,s[1][0])/C:et(w+(l?k:-k)*C+P,s[0][0])/C,D=Math.max(D,e)}if(a){let e=0;e=!d&&!l||l&&!d&&g?et(w+M*C,a[1][0])/C:tt(w+(l?k:-k)*C,a[0][0])/C,D=Math.max(D,e)}}}k+=k<0?D:-D,E+=E<0?I:-I,r&&(g?N>M*C?k=(ot(d,l)?-E:E)/C:E=(ot(d,l)?-k:k)*C:c?(k=E/C,l=d):(E=k*C,d=l));const z=d?w+E:w,R=l?S+k:S;return{width:b+(d?-E:E),height:v+(l?-k:k),x:i[0]*E*(d?-1:1)+z,y:i[1]*k*(l?-1:1)+R}}(p,m,l,s,d,M,x,w),z=P!==E,R=O!==k,A=I!==v&&z,L=D!==C&&R;if(!(A||L||z||R))return;if((A||L||1===M[0]||1===M[1])&&(N.x=A?I:h.x,N.y=L?D:h.y,h.x=N.x,h.y=N.y,b.length>0)){const e=I-v,t=D-C;for(const n of b)n.position={x:n.position.x-e+M[0]*(P-E),y:n.position.y-t+M[1]*(O-k)},u.push(n)}if((z||R)&&(N.width=z?P:h.width,N.height=R?O:h.height,h.width=N.width,h.height=N.height),y&&f.expandParent){const e=M[0]*(N.width??0);N.x&&N.x<e&&(h.x=e,p.x=p.x-(N.x-e));const t=M[1]*(N.height??0);N.y&&N.y<t&&(h.y=t,p.y=p.y-(N.y-t))}const B=function({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const s=e-t,a=n-o,d=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(d[0]=-1*d[0]),a&&i&&(d[1]=-1*d[1]),d}({width:h.width,prevWidth:E,height:h.height,prevHeight:k,affectsX:m.affectsX,affectsY:m.affectsY}),$={...h,direction:B},_=g?.(e,$);!1!==_&&(c?.(e,$),o(N,u))})).on("end",(e=>{u?.(e,{...h}),r?.()}));a.call(v)},destroy:function(){a.on(".drag",null)}}}var dt=n(86326),lt=n(61100),ct=n(19167);const{useDebugValue:ut}=dt,{useSyncExternalStoreWithSelector:gt}=lt,ht=e=>e;function pt(e,t=ht,n){const o=gt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ut(o),o}const mt=(e,t)=>{const n=(0,ct.y)(e),o=(e,o=t)=>pt(n,e,o);return Object.assign(o,n),o};function ft(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var yt=n(35623);const xt=(0,dt.createContext)(null),wt=xt.Provider,St=d.error001();function bt(e,t){const n=(0,dt.useContext)(xt);if(null===n)throw new Error(St);return pt(n,e,t)}function vt(){const e=(0,dt.useContext)(xt);if(null===e)throw new Error(St);return(0,dt.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const Ct={display:"none"},Et={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kt="react-flow__node-desc",Nt="react-flow__edge-desc",Mt="react-flow__aria-live",Pt=e=>e.ariaLiveMessage;function Ot({rfId:e}){const t=bt(Pt);return(0,o.jsx)("div",{id:`${Mt}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Et,children:t})}function It({rfId:e,disableKeyboardA11y:t}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{id:`${kt}-${e}`,style:Ct,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,o.jsx)("div",{id:`${Nt}-${e}`,style:Ct,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&(0,o.jsx)(Ot,{rfId:e})]})}const Dt=e=>e.userSelectionActive?"none":"all",zt=(0,dt.forwardRef)((({position:e="top-left",children:t,className:n,style:i,...s},a)=>{const d=bt(Dt),l=`${e}`.split("-");return(0,o.jsx)("div",{className:r(["react-flow__panel",n,...l]),style:{...i,pointerEvents:d},ref:a,...s,children:t})}));function Rt({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,o.jsx)(zt,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,o.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const At=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},Lt=e=>e.id;function Bt(e,t){return ft(e.selectedNodes.map(Lt),t.selectedNodes.map(Lt))&&ft(e.selectedEdges.map(Lt),t.selectedEdges.map(Lt))}function $t({onSelectionChange:e}){const t=vt(),{selectedNodes:n,selectedEdges:o}=bt(At,Bt);return(0,dt.useEffect)((()=>{const r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChangeHandlers.forEach((e=>e(r)))}),[n,o,e]),null}const _t=e=>!!e.onSelectionChangeHandlers;function Vt({onSelectionChange:e}){const t=bt(_t);return e||t?(0,o.jsx)($t,{onSelectionChange:e}):null}const jt=[0,0],Ht={x:0,y:0,zoom:1},Tt=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],Zt=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Yt={translateExtent:l,nodeOrigin:jt,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Xt(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:d,setPaneClickDistance:l}=bt(Zt,ft),c=vt();(0,dt.useEffect)((()=>(d(e.defaultNodes,e.defaultEdges),()=>{u.current=Yt,a()})),[]);const u=(0,dt.useRef)(Yt);return(0,dt.useEffect)((()=>{for(const a of Tt){const d=e[a];d!==u.current[a]&&(void 0!==e[a]&&("nodes"===a?t(d):"edges"===a?n(d):"minZoom"===a?o(d):"maxZoom"===a?r(d):"translateExtent"===a?i(d):"nodeExtent"===a?s(d):"paneClickDistance"===a?l(d):"fitView"===a?c.setState({fitViewOnInit:d}):"fitViewOptions"===a?c.setState({fitViewOnInitOptions:d}):c.setState({[a]:d})))}u.current=e}),Tt.map((t=>e[t]))),null}function Wt(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const Ft="undefined"!=typeof document?document:null;function Kt(e=null,t={target:Ft,actInsideInputWithModifier:!0}){const[n,o]=(0,dt.useState)(!1),r=(0,dt.useRef)(!1),i=(0,dt.useRef)(new Set([])),[s,a]=(0,dt.useMemo)((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return(0,dt.useEffect)((()=>{const n=t?.target||Ft;if(null!==e){const e=e=>{r.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!r.current||r.current&&!t.actInsideInputWithModifier)&&re(e))return!1;const n=Ut(e.code,a);i.current.add(e[n]),Gt(s,i.current,!1)&&(e.preventDefault(),o(!0))},d=e=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&re(e))return!1;const n=Ut(e.code,a);Gt(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(e[n]),"Meta"===e.key&&i.current.clear(),r.current=!1},l=()=>{i.current.clear(),o(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",d),window.addEventListener("blur",l),window.addEventListener("contextmenu",l),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",d),window.removeEventListener("blur",l),window.removeEventListener("contextmenu",l)}}}),[e,o]),n}function Gt(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function Ut(e,t){return t.includes(e)?"code":"key"}const qt=()=>{const e=vt();return(0,dt.useMemo)((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:r,panZoom:i,domNode:s}=e.getState();if(!i||!s)return Promise.resolve(!1);const a=M(n,t),{width:d,height:l}=te(s);return P({nodes:a,width:d,height:l,minZoom:o,maxZoom:r,panZoom:i},t)},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:s,panZoom:a}=e.getState(),d=void 0!==o?.zoom?o.zoom:s,l=r/2-t*d,c=i/2-n*d;return a?(await a.setViewport({x:l,y:c,zoom:d},{duration:o?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),d=K(t,o,r,i,s,n?.padding??.1);return a?(await a.setViewport(d,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:r,domNode:i}=e.getState();if(!i)return t;const{x:s,y:a}=i.getBoundingClientRect(),d={x:t.x-s,y:t.y-a};return W(d,o,n.snapToGrid,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),s=F(t,n);return{x:s.x+r,y:s.y+i}}})),[])};function Qt(e,t){const n=[],o=new Map,r=[];for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)o.set(t.id,[t]);else{const e=o.get(t.id);e?e.push(t):o.set(t.id,[t])}else r.push(t);for(const e of t){const t=o.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const r={...e};for(const e of t)Jt(e,r);n.push(r)}return r.length&&r.forEach((e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})})),n}function Jt(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function en(e,t){return Qt(e,t)}function tn(e,t){return Qt(e,t)}function nn(e,t){return{id:e,type:"select",selected:t}}function on(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const e=t.has(r);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push(nn(i.id,e)))}return o}function rn({items:e=[],lookup:t}){const n=[],o=new Map(e.map((e=>[e.id,e])));for(const[o,r]of e.entries()){const e=t.get(r.id),i=e?.internals?.userNode??e;void 0!==i&&i!==r&&n.push({id:r.id,item:r,type:"replace"}),void 0===i&&n.push({item:r,type:"add",index:o})}for(const[e]of t){void 0===o.get(e)&&n.push({id:e,type:"remove"})}return n}function sn(e){return{id:e.id,type:"remove"}}const an=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e),dn=e=>S(e);function ln(e){return(0,dt.forwardRef)(e)}const cn="undefined"!=typeof window?dt.useLayoutEffect:dt.useEffect;function un(e){const[t,n]=(0,dt.useState)(BigInt(0)),[o]=(0,dt.useState)((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n((e=>e+BigInt(1)))))));return cn((()=>{const t=o.get();t.length&&(e(t),o.reset())}),[t]),o}const gn=(0,dt.createContext)(null);function hn({children:e}){const t=vt(),n=un((0,dt.useCallback)((e=>{const{nodes:n=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:s}=t.getState();let a=n;for(const t of e)a="function"==typeof t?t(a):t;r?o(a):i&&i(rn({items:a,lookup:s}))}),[])),r=un((0,dt.useCallback)((e=>{const{edges:n=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:s}=t.getState();let a=n;for(const t of e)a="function"==typeof t?t(a):t;r?o(a):i&&i(rn({items:a,lookup:s}))}),[])),i=(0,dt.useMemo)((()=>({nodeQueue:n,edgeQueue:r})),[]);return(0,o.jsx)(gn.Provider,{value:i,children:e})}const pn=e=>!!e.panZoom;function mn(){const e=qt(),t=vt(),n=function(){const e=(0,dt.useContext)(gn);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=bt(pn),r=(0,dt.useMemo)((()=>{const e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},r=e=>{n.edgeQueue.push(e)},i=e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState(),r=an(e)?e:n.get(e.id),i=r.parentId?J(r.position,r.measured,r.parentId,n,o):r.position,s={...r,position:i,width:r.measured?.width??r.width,height:r.measured?.height??r.height};return _(s)},s=(e,t,n={replace:!1})=>{o((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&an(e)?e:{...o,...e}}return o}))))},a=(e,t,n={replace:!1})=>{r((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&dn(e)?e:{...o,...e}}return o}))))};return{getNodes:()=>t.getState().nodes.map((e=>({...e}))),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:o}=t.getState(),[r,i,s]=o;return{nodes:e.map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:r,y:i,zoom:s}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:o,edges:r,onNodesDelete:i,onEdgesDelete:s,triggerNodeChanges:a,triggerEdgeChanges:d,onDelete:l,onBeforeDelete:c}=t.getState(),{nodes:u,edges:g}=await async function({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map((e=>e.id))),s=[];for(const e of n){if(!1===e.deletable)continue;const t=i.has(e.id),n=!t&&e.parentId&&s.find((t=>t.id===e.parentId));(t||n)&&s.push(e)}const a=new Set(t.map((e=>e.id))),d=o.filter((e=>!1!==e.deletable)),l=N(s,d);for(const e of d)a.has(e.id)&&!l.find((t=>t.id===e.id))&&l.push(e);if(!r)return{edges:l,nodes:s};const c=await r({nodes:s,edges:l});return"boolean"==typeof c?c?{edges:l,nodes:s}:{edges:[],nodes:[]}:c}({nodesToRemove:e,edgesToRemove:n,nodes:o,edges:r,onBeforeDelete:c}),h=g.length>0,p=u.length>0;if(h){const e=g.map(sn);s?.(g),d(e)}if(p){const e=u.map(sn);i?.(u),a(e)}return(p||h)&&l?.({nodes:u,edges:g}),{deletedNodes:u,deletedEdges:g}},getIntersectingNodes:(e,n=!0,o)=>{const r=T(e),s=r?e:i(e),a=void 0!==o;return s?(o||t.getState().nodes).filter((o=>{const i=t.getState().nodeLookup.get(o.id);if(i&&!r&&(o.id===e.id||!i.internals.positionAbsolute))return!1;const d=_(a?o:i),l=H(d,s);return n&&l>0||l>=s.width*s.height})):[]},isNodeIntersecting:(e,t,n=!0)=>{const o=T(e)?e:i(e);if(!o)return!1;const r=H(o,t);return n&&r>0||r>=o.width*o.height},updateNode:s,updateNodeData:(e,t,n={replace:!1})=>{s(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},updateEdge:a,updateEdgeData:(e,t,n={replace:!1})=>{a(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState();return C(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:({type:e,id:n,nodeId:o})=>Array.from(t.getState().connectionLookup.get(`${o}-${e}-${n??null}`)?.values()??[])}}),[]);return(0,dt.useMemo)((()=>({...r,...e,viewportInitialized:o})),[o])}const fn=e=>e.selected,yn={actInsideInputWithModifier:!1},xn="undefined"!=typeof window?window:void 0;const wn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Sn=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function bn({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=g.Free,zoomOnDoubleClick:a=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:u,minZoom:h,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:f=!0,children:y,noWheelClassName:x,noPanClassName:w,onViewportChange:S,isControlledViewport:b,paneClickDistance:v}){const C=vt(),E=(0,dt.useRef)(null),{userSelectionActive:k,lib:N}=bt(Sn,ft),M=Kt(m),P=(0,dt.useRef)();!function(e){const t=vt();(0,dt.useEffect)((()=>{const n=()=>{if(!e.current)return!1;const n=te(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",d.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(E);const O=(0,dt.useCallback)((e=>{S?.({x:e[0],y:e[1],zoom:e[2]}),b||C.setState({transform:e})}),[S,b]);return(0,dt.useEffect)((()=>{if(E.current){P.current=Qe({domNode:E.current,minZoom:h,maxZoom:p,translateExtent:u,viewport:c,paneClickDistance:v,onDraggingChange:e=>C.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:o}=C.getState();o?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:o}=C.getState();o?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:o}=C.getState();o?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=P.current.getViewport();return C.setState({panZoom:P.current,transform:[e,t,n],domNode:E.current.closest(".react-flow")}),()=>{P.current?.destroy()}}}),[]),(0,dt.useEffect)((()=>{P.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:a,panOnDrag:l,zoomActivationKeyPressed:M,preventScrolling:f,noPanClassName:w,userSelectionActive:k,noWheelClassName:x,lib:N,onTransformChange:O})}),[e,t,n,r,i,s,a,l,M,f,w,k,x,N,O]),(0,o.jsx)("div",{className:"react-flow__renderer",ref:E,style:wn,children:y})}const vn=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Cn(){const{userSelectionActive:e,userSelectionRect:t}=bt(vn,ft);return e&&t?(0,o.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const En=(e,t)=>n=>{n.target===t.current&&e?.(n)},kn=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Nn({isSelecting:e,selectionKeyPressed:t,selectionMode:n=h.Full,panOnDrag:i,selectionOnDrag:s,onSelectionStart:a,onSelectionEnd:d,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:g,onPaneMouseMove:p,onPaneMouseLeave:m,children:f}){const y=(0,dt.useRef)(null),x=vt(),w=(0,dt.useRef)(0),S=(0,dt.useRef)(0),b=(0,dt.useRef)(),v=(0,dt.useRef)(new Map),{userSelectionActive:C,elementsSelectable:E,dragging:N}=bt(kn,ft),M=E&&(e||C),P=(0,dt.useRef)(!1),O=(0,dt.useRef)(!1),I=e=>{P.current?P.current=!1:(l?.(e),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1}))},D=u?e=>u(e):void 0,z=!0===i||Array.isArray(i)&&i.includes(0);return(0,o.jsxs)("div",{className:r(["react-flow__pane",{draggable:z,dragging:N,selection:e}]),onClick:M?void 0:En(I,y),onContextMenu:En((e=>{Array.isArray(i)&&i?.includes(2)?e.preventDefault():c?.(e)}),y),onWheel:En(D,y),onPointerEnter:M?void 0:g,onPointerDown:M?t=>{const{resetSelectedElements:n,domNode:o,edgeLookup:r}=x.getState();if(b.current=o?.getBoundingClientRect(),!E||!e||0!==t.button||t.target!==y.current||!b.current)return;t.target?.setPointerCapture?.(t.pointerId),O.current=!0,P.current=!1,v.current=new Map;for(const[e,t]of r)v.current.set(t.source,v.current.get(t.source)?.add(e)||new Set([e])),v.current.set(t.target,v.current.get(t.target)?.add(e)||new Set([e]));const{x:i,y:s}=se(t.nativeEvent,b.current);n(),x.setState({userSelectionRect:{width:0,height:0,startX:i,startY:s,x:i,y:s}}),a?.(t)}:p,onPointerMove:M?e=>{const{userSelectionRect:t,edgeLookup:o,transform:r,nodeLookup:i,triggerNodeChanges:s,triggerEdgeChanges:a}=x.getState();if(!b.current||!t)return;P.current=!0;const{x:d,y:l}=se(e.nativeEvent,b.current),{startX:c,startY:u}=t,g={startX:c,startY:u,x:d<c?d:c,y:l<u?l:u,width:Math.abs(d-c),height:Math.abs(l-u)},p=k(i,g,r,n===h.Partial,!0),m=new Set,f=new Set;for(const e of p){f.add(e.id);const t=v.current.get(e.id);if(t)for(const e of t)m.add(e)}if(w.current!==f.size){w.current=f.size;s(on(i,f,!0))}if(S.current!==m.size){S.current=m.size;a(on(o,m))}x.setState({userSelectionRect:g,userSelectionActive:!0,nodesSelectionActive:!1})}:p,onPointerUp:M?e=>{if(0!==e.button||!O.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:n}=x.getState();!C&&n&&e.target===y.current&&I?.(e),w.current>0&&x.setState({nodesSelectionActive:!0}),x.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,S.current=0,d?.(e),(t||s)&&(P.current=!1),O.current=!1}:void 0,onPointerLeave:m,ref:y,style:wn,children:[f,(0,o.jsx)(Cn,{})]})}function Mn({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),c=a.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame((()=>o?.current?.blur()))):r([e])):l?.("012",d.error012(e))}function Pn({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:s}){const a=vt(),[d,l]=(0,dt.useState)(!1),c=(0,dt.useRef)();return(0,dt.useEffect)((()=>{c.current=$e({getStoreItems:()=>a.getState(),onNodeMouseDown:t=>{Mn({id:t,store:a,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})}),[]),(0,dt.useEffect)((()=>{if(t)c.current?.destroy();else if(e.current)return c.current?.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:r,nodeClickDistance:s}),()=>{c.current?.destroy()}}),[n,o,t,i,e,r]),d}const On=e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable);function In(){const e=vt();return(0,dt.useCallback)((t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:s,updateNodePositions:a,nodeLookup:d,nodeOrigin:l}=e.getState(),c=new Map,u=On(i),g=o?r[0]:5,h=o?r[1]:5,p=t.direction.x*g*t.factor,m=t.direction.y*h*t.factor;for(const[,e]of d){if(!u(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+m};o&&(t=X(t,r));const{position:i,positionAbsolute:a}=O({nodeId:e.id,nextPosition:t,nodeLookup:d,nodeExtent:n,nodeOrigin:l,onError:s});e.position=i,e.internals.positionAbsolute=a,c.set(e.id,e)}a(c)}),[])}const Dn=(0,dt.createContext)(null),zn=Dn.Provider;Dn.Consumer;const Rn=()=>(0,dt.useContext)(Dn),An=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Ln=(0,dt.memo)(ln((function({type:e="source",position:t=y.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:l,onConnect:c,children:g,className:h,onMouseDown:p,onTouchStart:m,...f},x){const w=l||null,b="target"===e,v=vt(),C=Rn(),{connectOnClick:E,noPanClassName:k,rfId:N}=bt(An,ft),{connectingFrom:M,connectingTo:P,clickConnecting:O,isPossibleEndHandle:I,connectionInProcess:D,valid:z}=bt(((e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:s}=o,{fromHandle:a,toHandle:d,isValid:l}=s,c=d?.nodeId===e&&d?.id===t&&d?.type===n;return{connectingFrom:a?.nodeId===e&&a?.id===t&&a?.type===n,connectingTo:c,clickConnecting:r?.nodeId===e&&r?.id===t&&r?.type===n,isPossibleEndHandle:i===u.Strict?a?.type!==n:e!==a?.nodeId||t!==a?.id,connectionInProcess:!!a,valid:c&&l}})(C,w,e),ft);C||v.getState().onError?.("010",d.error010());const R=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=v.getState(),r={...t,...e};if(o){const{edges:e,setEdges:t}=v.getState();t(((e,t)=>{if(!e.source||!e.target)return Y(0,d.error006()),t;let n;return n=S(e)?{...e}:{...e,id:pe(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))})(r,e))}n?.(r),c?.(r)},A=e=>{if(!C)return;const t=ie(e.nativeEvent);if(s&&(t&&0===e.button||!t)){const t=v.getState();Ye.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:b,handleId:w,nodeId:C,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:R,isValidConnection:n||t.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?p?.(e):m?.(e)};return(0,o.jsx)("div",{"data-handleid":w,"data-nodeid":C,"data-handlepos":t,"data-id":`${N}-${C}-${w}-${e}`,className:r(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,h,{source:!b,target:b,connectable:i,connectablestart:s,connectableend:a,clickconnecting:O,connectingfrom:M,connectingto:P,valid:z,connectionindicator:i&&(!D||I)&&(D?a:s)}]),onMouseDown:A,onTouchStart:A,onClick:E?t=>{const{onClickConnectStart:o,onClickConnectEnd:r,connectionClickStartHandle:i,connectionMode:a,isValidConnection:d,lib:l,rfId:c,nodeLookup:u,connection:g}=v.getState();if(!C||!i&&!s)return;if(!i)return o?.(t.nativeEvent,{nodeId:C,handleId:w,handleType:e}),void v.setState({connectionClickStartHandle:{nodeId:C,type:e,id:w}});const h=ne(t.target),p=n||d,{connection:m,isValid:f}=Ye.isValid(t.nativeEvent,{handle:{nodeId:C,id:w,type:e},connectionMode:a,fromNodeId:i.nodeId,fromHandleId:i.id||null,fromType:i.type,isValidConnection:p,flowId:c,doc:h,lib:l,nodeLookup:u});f&&m&&R(m);const y=structuredClone(g);delete y.inProgress,y.toPosition=y.toHandle?y.toHandle.position:null,r?.(t,y),v.setState({connectionClickStartHandle:null})}:void 0,ref:x,...f,children:g})})));const Bn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},$n={input:function({data:e,isConnectable:t,sourcePosition:n=y.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[e?.label,(0,o.jsx)(Ln,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=y.Top,sourcePosition:r=y.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ln,{type:"target",position:n,isConnectable:t}),e?.label,(0,o.jsx)(Ln,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=y.Top}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ln,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}};const _n=e=>{const{width:t,height:n,x:o,y:r}=E(e.nodeLookup,{filter:e=>!!e.selected});return{width:Z(t)?t:null,height:Z(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function Vn({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=vt(),{width:s,height:a,transformString:d,userSelectionActive:l}=bt(_n,ft),c=In(),u=(0,dt.useRef)(null);if((0,dt.useEffect)((()=>{n||u.current?.focus({preventScroll:!0})}),[n]),Pn({nodeRef:u}),l||!s||!a)return null;const g=e?t=>{const n=i.getState().nodes.filter((e=>e.selected));e(t,n)}:void 0;return(0,o.jsx)("div",{className:r(["react-flow__nodesselection","react-flow__container",t]),style:{transform:d},children:(0,o.jsx)("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(Bn,e.key)&&(e.preventDefault(),c({direction:Bn[e.key],factor:e.shiftKey?4:1}))},style:{width:s,height:a}})})}const jn="undefined"!=typeof window?window:void 0,Hn=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Tn({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,paneClickDistance:d,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:u,selectionMode:g,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:m,panActivationKeyCode:f,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:S,panOnScroll:b,panOnScrollSpeed:v,panOnScrollMode:C,zoomOnDoubleClick:E,panOnDrag:k,defaultViewport:N,translateExtent:M,minZoom:P,maxZoom:O,preventScrolling:I,onSelectionContextMenu:D,noWheelClassName:z,noPanClassName:R,disableKeyboardA11y:A,onViewportChange:L,isControlledViewport:B}){const{nodesSelectionActive:$,userSelectionActive:_}=bt(Hn),V=Kt(c,{target:jn}),j=Kt(f,{target:jn}),H=j||k,T=j||b,Z=u&&!0!==H,Y=V||_||Z;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=vt(),{deleteElements:o}=mn(),r=Kt(e,yn),i=Kt(t,{target:xn});(0,dt.useEffect)((()=>{if(r){const{edges:e,nodes:t}=n.getState();o({nodes:t.filter(fn),edges:e.filter(fn)}),n.setState({nodesSelectionActive:!1})}}),[r]),(0,dt.useEffect)((()=>{n.setState({multiSelectionActive:i})}),[i])}({deleteKeyCode:l,multiSelectionKeyCode:m}),(0,o.jsx)(bn,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:S,panOnScroll:T,panOnScrollSpeed:v,panOnScrollMode:C,zoomOnDoubleClick:E,panOnDrag:!V&&H,defaultViewport:N,translateExtent:M,minZoom:P,maxZoom:O,zoomActivationKeyCode:y,preventScrolling:I,noWheelClassName:z,noPanClassName:R,onViewportChange:L,isControlledViewport:B,paneClickDistance:d,children:(0,o.jsxs)(Nn,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:H,isSelecting:!!Y,selectionMode:g,selectionKeyPressed:V,selectionOnDrag:Z,children:[e,$&&(0,o.jsx)(Vn,{onSelectionContextMenu:D,noPanClassName:R,disableKeyboardA11y:A})]})})}Tn.displayName="FlowRenderer";const Zn=(0,dt.memo)(Tn),Yn=e=>t=>e?k(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys());const Xn=e=>e.updateNodeInternals;function Wn({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:s,onContextMenu:a,onDoubleClick:l,nodesDraggable:u,elementsSelectable:g,nodesConnectable:h,nodesFocusable:p,resizeObserver:m,noDragClassName:f,noPanClassName:y,disableKeyboardA11y:x,rfId:w,nodeTypes:S,nodeExtent:b,nodeClickDistance:v,onError:C}){const{node:E,internals:k,isParent:N}=bt((t=>{const n=t.nodeLookup.get(e),o=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:o}}),ft);let M=E.type||"default",P=S?.[M]||$n[M];void 0===P&&(C?.("003",d.error003(M)),M="default",P=$n.default);const O=!!(E.draggable||u&&void 0===E.draggable),I=!!(E.selectable||g&&void 0===E.selectable),D=!!(E.connectable||h&&void 0===E.connectable),z=!!(E.focusable||p&&void 0===E.focusable),R=vt(),A=Q(E),L=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=vt(),i=(0,dt.useRef)(null),s=(0,dt.useRef)(null),a=(0,dt.useRef)(e.sourcePosition),d=(0,dt.useRef)(e.targetPosition),l=(0,dt.useRef)(t),c=n&&!!e.internals.handleBounds;return(0,dt.useEffect)((()=>{!i.current||e.hidden||c&&s.current===i.current||(s.current&&o?.unobserve(s.current),o?.observe(i.current),s.current=i.current)}),[c,e.hidden]),(0,dt.useEffect)((()=>()=>{s.current&&(o?.unobserve(s.current),s.current=null)}),[]),(0,dt.useEffect)((()=>{if(i.current){const n=l.current!==t,o=a.current!==e.sourcePosition,s=d.current!==e.targetPosition;(n||o||s)&&(l.current=t,a.current=e.sourcePosition,d.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}}),[e.id,t,e.sourcePosition,e.targetPosition]),i}({node:E,nodeType:M,hasDimensions:A,resizeObserver:m}),B=Pn({nodeRef:L,disabled:E.hidden||!O,noDragClassName:f,handleSelector:E.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:v}),$=In();if(E.hidden)return null;const _=q(E),V=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(E),j=I||O||t||n||i||s,H=n?e=>n(e,{...k.userNode}):void 0,T=i?e=>i(e,{...k.userNode}):void 0,Z=s?e=>s(e,{...k.userNode}):void 0,Y=a?e=>a(e,{...k.userNode}):void 0,X=l?e=>l(e,{...k.userNode}):void 0;return(0,o.jsx)("div",{className:r(["react-flow__node",`react-flow__node-${M}`,{[y]:O},E.className,{selected:E.selected,selectable:I,parent:N,draggable:O,dragging:B}]),ref:L,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:j?"all":"none",visibility:A?"visible":"hidden",...E.style,...V},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:T,onMouseLeave:Z,onContextMenu:Y,onClick:n=>{const{selectNodesOnDrag:o,nodeDragThreshold:r}=R.getState();I&&(!o||!O||r>0)&&Mn({id:e,store:R,nodeRef:L}),t&&t(n,{...k.userNode})},onDoubleClick:X,onKeyDown:z?t=>{if(!re(t.nativeEvent)&&!x)if(c.includes(t.key)&&I){const n="Escape"===t.key;Mn({id:e,store:R,unselect:n,nodeRef:L})}else O&&E.selected&&Object.prototype.hasOwnProperty.call(Bn,t.key)&&(t.preventDefault(),R.setState({ariaLiveMessage:`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~k.positionAbsolute.x}, y: ${~~k.positionAbsolute.y}`}),$({direction:Bn[t.key],factor:t.shiftKey?4:1}))}:void 0,tabIndex:z?0:void 0,role:z?"button":void 0,"aria-describedby":x?void 0:`${kt}-${w}`,"aria-label":E.ariaLabel,children:(0,o.jsx)(zn,{value:e,children:(0,o.jsx)(P,{id:e,data:E.data,type:M,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:E.selected,selectable:I,draggable:O,deletable:E.deletable??!0,isConnectable:D,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:B,dragHandle:E.dragHandle,zIndex:k.z,parentId:E.parentId,..._})})})}const Fn=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Kn(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=bt(Fn,ft),a=(d=e.onlyRenderVisibleElements,bt((0,dt.useCallback)(Yn(d),[d]),ft));var d;const l=function(){const e=bt(Xn),[t]=(0,dt.useState)((()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return(0,dt.useEffect)((()=>()=>{t?.disconnect()}),[t]),t}();return(0,o.jsx)("div",{className:"react-flow__nodes",style:wn,children:a.map((a=>(0,o.jsx)(Wn,{id:a,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},a)))})}Kn.displayName="NodeRenderer";const Gn=(0,dt.memo)(Kn);const Un={[f.Arrow]:({color:e="none",strokeWidth:t=1})=>(0,o.jsx)("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[f.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>(0,o.jsx)("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const qn=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:l="auto-start-reverse"})=>{const c=function(e){const t=vt();return(0,dt.useMemo)((()=>Object.prototype.hasOwnProperty.call(Un,e)?Un[e]:(t.getState().onError?.("009",d.error009(e)),null)),[e])}(t);return c?(0,o.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:(0,o.jsx)(c,{color:n,strokeWidth:a})}):null},Qn=({defaultColor:e,rfId:t})=>{const n=bt((e=>e.edges)),r=bt((e=>e.defaultEdgeOptions)),i=(0,dt.useMemo)((()=>{const o=function(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce(((e,s)=>([s.markerStart||o,s.markerEnd||r].forEach((o=>{if(o&&"object"==typeof o){const r=Ee(o,t);i.has(r)||(e.push({id:r,color:o.color||n,...o}),i.add(r))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd});return o}),[n,r,t,e]);return i.length?(0,o.jsx)("svg",{className:"react-flow__marker",children:(0,o.jsx)("defs",{children:i.map((e=>(0,o.jsx)(qn,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};Qn.displayName="MarkerDefinitions";var Jn=(0,dt.memo)(Qn);function eo({x:e,y:t,label:n,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:d=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...g}){const[h,p]=(0,dt.useState)({x:1,y:0,width:0,height:0}),m=r(["react-flow__edge-textwrapper",u]),f=(0,dt.useRef)(null);return(0,dt.useEffect)((()=>{if(f.current){const e=f.current.getBBox();p({x:e.x,y:e.y,width:e.width,height:e.height})}}),[n]),void 0!==n&&n?(0,o.jsxs)("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:m,visibility:h.width?"visible":"hidden",...g,children:[s&&(0,o.jsx)("rect",{width:h.width+2*d[0],x:-d[0],y:-d[1],height:h.height+2*d[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),(0,o.jsx)("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:i,children:n}),c]}):null}eo.displayName="EdgeText";const to=(0,dt.memo)(eo);function no({path:e,labelX:t,labelY:n,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:c,interactionWidth:u=20,...g}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{...g,d:e,fill:"none",className:r(["react-flow__edge-path",g.className])}),u&&(0,o.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),i&&Z(t)&&Z(n)?(0,o.jsx)(to,{x:t,y:n,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function oo({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===y.Left||e===y.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function ro({sourceX:e,sourceY:t,sourcePosition:n=y.Bottom,targetX:o,targetY:r,targetPosition:i=y.Top}){const[s,a]=oo({pos:n,x1:e,y1:t,x2:o,y2:r}),[d,l]=oo({pos:i,x1:o,y1:r,x2:e,y2:t}),[c,u,g,h]=de({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:d,targetControlY:l});return[`M${e},${t} C${s},${a} ${d},${l} ${o},${r}`,c,u,g,h]}function io(e){return(0,dt.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:a=y.Bottom,targetPosition:d=y.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:f,markerStart:x,interactionWidth:w})=>{const[S,b,v]=ro({sourceX:n,sourceY:r,sourcePosition:a,targetX:i,targetY:s,targetPosition:d}),C=e.isInternal?void 0:t;return(0,o.jsx)(no,{id:C,path:S,labelX:b,labelY:v,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:f,markerStart:x,interactionWidth:w})}))}const so=io({isInternal:!1}),ao=io({isInternal:!0});function lo(e){return(0,dt.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:a,labelStyle:d,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,style:h,sourcePosition:p=y.Bottom,targetPosition:m=y.Top,markerEnd:f,markerStart:x,pathOptions:w,interactionWidth:S})=>{const[b,v,C]=we({sourceX:n,sourceY:r,sourcePosition:p,targetX:i,targetY:s,targetPosition:m,borderRadius:w?.borderRadius,offset:w?.offset}),E=e.isInternal?void 0:t;return(0,o.jsx)(no,{id:E,path:b,labelX:v,labelY:C,label:a,labelStyle:d,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,style:h,markerEnd:f,markerStart:x,interactionWidth:S})}))}so.displayName="SimpleBezierEdge",ao.displayName="SimpleBezierEdgeInternal";const co=lo({isInternal:!1}),uo=lo({isInternal:!0});function go(e){return(0,dt.memo)((({id:t,...n})=>{const r=e.isInternal?void 0:t;return(0,o.jsx)(co,{...n,id:r,pathOptions:(0,dt.useMemo)((()=>({borderRadius:0,offset:n.pathOptions?.offset})),[n.pathOptions?.offset])})}))}co.displayName="SmoothStepEdge",uo.displayName="SmoothStepEdgeInternal";const ho=go({isInternal:!1}),po=go({isInternal:!0});function mo(e){return(0,dt.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:a,labelStyle:d,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,style:h,markerEnd:p,markerStart:m,interactionWidth:f})=>{const[y,x,w]=me({sourceX:n,sourceY:r,targetX:i,targetY:s}),S=e.isInternal?void 0:t;return(0,o.jsx)(no,{id:S,path:y,labelX:x,labelY:w,label:a,labelStyle:d,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,style:h,markerEnd:p,markerStart:m,interactionWidth:f})}))}ho.displayName="StepEdge",po.displayName="StepEdgeInternal";const fo=mo({isInternal:!1}),yo=mo({isInternal:!0});function xo(e){return(0,dt.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:a=y.Bottom,targetPosition:d=y.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:f,markerStart:x,pathOptions:w,interactionWidth:S})=>{const[b,v,C]=ue({sourceX:n,sourceY:r,sourcePosition:a,targetX:i,targetY:s,targetPosition:d,curvature:w?.curvature}),E=e.isInternal?void 0:t;return(0,o.jsx)(no,{id:E,path:b,labelX:v,labelY:C,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:f,markerStart:x,interactionWidth:S})}))}fo.displayName="StraightEdge",yo.displayName="StraightEdgeInternal";const wo=xo({isInternal:!1}),So=xo({isInternal:!0});wo.displayName="BezierEdge",So.displayName="BezierEdgeInternal";const bo={default:So,straight:yo,step:po,smoothstep:uo,simplebezier:ao},vo={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Co=(e,t,n)=>n===y.Left?e-t:n===y.Right?e+t:e,Eo=(e,t,n)=>n===y.Top?e-t:n===y.Bottom?e+t:e,ko="react-flow__edgeupdater";function No({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:s,onMouseEnter:a,onMouseOut:d,type:l}){return(0,o.jsx)("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:d,className:r([ko,`${ko}-${l}`]),cx:Co(t,i,e),cy:Eo(n,i,e),r:i,stroke:"transparent",fill:"transparent"})}function Mo({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:a,sourcePosition:d,targetPosition:l,onReconnect:c,onReconnectStart:u,onReconnectEnd:g,setReconnecting:h,setUpdateHover:p}){const m=vt(),f=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:o,domNode:r,isValidConnection:i,connectionMode:s,connectionRadius:a,lib:d,onConnectStart:l,onConnectEnd:p,cancelConnection:f,nodeLookup:y,rfId:x,panBy:w,updateConnection:S}=m.getState(),b="target"===t.type;h(!0),u?.(e,n,t.type);Ye.onPointerDown(e.nativeEvent,{autoPanOnConnect:o,connectionMode:s,connectionRadius:a,domNode:r,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:b,edgeUpdaterType:t.type,lib:d,flowId:x,cancelConnection:f,panBy:w,isValidConnection:i,onConnect:e=>c?.(n,e),onConnectStart:l,onConnectEnd:p,onReconnectEnd:(e,o)=>{h(!1),g?.(e,n,t.type,o)},updateConnection:S,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle})},y=()=>p(!0),x=()=>p(!1);return(0,o.jsxs)(o.Fragment,{children:[(!0===e||"source"===e)&&(0,o.jsx)(No,{position:d,centerX:r,centerY:i,radius:t,onMouseDown:e=>f(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:y,onMouseOut:x,type:"source"}),(!0===e||"target"===e)&&(0,o.jsx)(No,{position:l,centerX:s,centerY:a,radius:t,onMouseDown:e=>f(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:y,onMouseOut:x,type:"target"})]})}function Po({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:s,onDoubleClick:a,onContextMenu:l,onMouseEnter:g,onMouseMove:h,onMouseLeave:p,reconnectRadius:m,onReconnect:f,onReconnectStart:x,onReconnectEnd:w,rfId:S,edgeTypes:b,noPanClassName:v,onError:C,disableKeyboardA11y:E}){let k=bt((t=>t.edgeLookup.get(e)));const N=bt((e=>e.defaultEdgeOptions));k=N?{...N,...k}:k;let M=k.type||"default",P=b?.[M]||bo[M];void 0===P&&(C?.("011",d.error011(M)),M="default",P=bo.default);const O=!!(k.focusable||t&&void 0===k.focusable),I=void 0!==f&&(k.reconnectable||n&&void 0===k.reconnectable),D=!!(k.selectable||i&&void 0===k.selectable),z=(0,dt.useRef)(null),[R,A]=(0,dt.useState)(!1),[L,B]=(0,dt.useState)(!1),$=vt(),{zIndex:_,sourceX:V,sourceY:j,targetX:H,targetY:T,sourcePosition:Z,targetPosition:Y}=bt((0,dt.useCallback)((t=>{const n=t.nodeLookup.get(k.source),o=t.nodeLookup.get(k.target);if(!n||!o)return{zIndex:k.zIndex,...vo};const r=function(e){const{sourceNode:t,targetNode:n}=e;if(!Se(t)||!Se(n))return null;const o=t.internals.handleBounds||be(t.handles),r=n.internals.handleBounds||be(n.handles),i=Ce(o?.source??[],e.sourceHandle),s=Ce(e.connectionMode===u.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",d.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=i?.position||y.Bottom,l=s?.position||y.Top,c=ve(t,i,a),g=ve(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:g.x,targetY:g.y,sourcePosition:a,targetPosition:l}}({id:e,sourceNode:n,targetNode:o,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:t.connectionMode,onError:C}),i=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?s:0)}({selected:k.selected,zIndex:k.zIndex,sourceNode:n,targetNode:o,elevateOnSelect:t.elevateEdgesOnSelect});return{zIndex:i,...r||vo}}),[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),ft),X=(0,dt.useMemo)((()=>k.markerStart?`url('#${Ee(k.markerStart,S)}')`:void 0),[k.markerStart,S]),W=(0,dt.useMemo)((()=>k.markerEnd?`url('#${Ee(k.markerEnd,S)}')`:void 0),[k.markerEnd,S]);if(k.hidden||null===V||null===j||null===H||null===T)return null;const F=a?e=>{a(e,{...k})}:void 0,K=l?e=>{l(e,{...k})}:void 0,G=g?e=>{g(e,{...k})}:void 0,U=h?e=>{h(e,{...k})}:void 0,q=p?e=>{p(e,{...k})}:void 0;return(0,o.jsx)("svg",{style:{zIndex:_},children:(0,o.jsxs)("g",{className:r(["react-flow__edge",`react-flow__edge-${M}`,k.className,v,{selected:k.selected,animated:k.animated,inactive:!D&&!s,updating:R,selectable:D}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:o,multiSelectionActive:r}=$.getState();D&&($.setState({nodesSelectionActive:!1}),k.selected&&r?(o({nodes:[],edges:[k]}),z.current?.blur()):n([e])),s&&s(t,k)},onDoubleClick:F,onContextMenu:K,onMouseEnter:G,onMouseMove:U,onMouseLeave:q,onKeyDown:O?t=>{if(!E&&c.includes(t.key)&&D){const{unselectNodesAndEdges:n,addSelectedEdges:o}=$.getState();"Escape"===t.key?(z.current?.blur(),n({edges:[k]})):o([e])}}:void 0,tabIndex:O?0:void 0,role:O?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===k.ariaLabel?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":O?`${Nt}-${S}`:void 0,ref:z,children:[!L&&(0,o.jsx)(P,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:D,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:V,sourceY:j,targetX:H,targetY:T,sourcePosition:Z,targetPosition:Y,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:X,markerEnd:W,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),I&&(0,o.jsx)(Mo,{edge:k,isReconnectable:I,reconnectRadius:m,onReconnect:f,onReconnectStart:x,onReconnectEnd:w,sourceX:V,sourceY:j,targetX:H,targetY:T,sourcePosition:Z,targetPosition:Y,setUpdateHover:A,setReconnecting:B})]})})}const Oo=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Io({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:a,onEdgeMouseEnter:d,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,reconnectRadius:g,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:m,disableKeyboardA11y:f}){const{edgesFocusable:y,edgesReconnectable:x,elementsSelectable:w,onError:S}=bt(Oo,ft),b=(v=t,bt((0,dt.useCallback)((e=>{if(!v)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const o=e.nodeLookup.get(n.source),r=e.nodeLookup.get(n.target);o&&r&&he({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[v]),ft));var v;return(0,o.jsxs)("div",{className:"react-flow__edges",children:[(0,o.jsx)(Jn,{defaultColor:e,rfId:n}),b.map((e=>(0,o.jsx)(Po,{id:e,edgesFocusable:y,edgesReconnectable:x,elementsSelectable:w,noPanClassName:i,onReconnect:s,onContextMenu:a,onMouseEnter:d,onMouseMove:l,onMouseLeave:c,onClick:u,reconnectRadius:g,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:m,rfId:n,onError:S,edgeTypes:r,disableKeyboardA11y:f},e)))]})}Io.displayName="EdgeRenderer";const Do=(0,dt.memo)(Io),zo=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Ro({children:e}){const t=bt(zo);return(0,o.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const Ao=e=>e.panZoom?.syncViewport;function Lo(e){return e.connection.inProgress?{...e.connection,to:W(e.connection.to,e.transform)}:{...e.connection}}function Bo(e){const t=function(e){if(e)return t=>{const n=Lo(t);return e(n)};return Lo}(e);return bt(t,ft)}const $o=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function _o({containerStyle:e,style:t,type:n,component:i}){const{nodesConnectable:s,width:a,height:d,isValid:l,inProgress:c}=bt($o,ft);return!!(a&&s&&c)?(0,o.jsx)("svg",{style:e,width:a,height:d,className:"react-flow__connectionline react-flow__container",children:(0,o.jsx)("g",{className:r(["react-flow__connection",w(l)]),children:(0,o.jsx)(Vo,{style:t,type:n,CustomComponent:i,isValid:l})})}):null}const Vo=({style:e,type:t=m.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:a,fromHandle:d,fromPosition:l,to:c,toNode:u,toHandle:g,toPosition:h}=Bo();if(!i)return;if(n)return(0,o.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:d,fromX:s.x,fromY:s.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:h,connectionStatus:w(r),toNode:u,toHandle:g});let p="";const f={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:h};switch(t){case m.Bezier:[p]=ue(f);break;case m.SimpleBezier:[p]=ro(f);break;case m.Step:[p]=we({...f,borderRadius:0});break;case m.SmoothStep:[p]=we(f);break;default:[p]=me(f)}return(0,o.jsx)("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};Vo.displayName="ConnectionLine";const jo={};function Ho(e=jo){(0,dt.useRef)(e),vt();(0,dt.useEffect)((()=>{0}),[e])}function To({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:a,onNodeMouseEnter:d,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,onSelectionContextMenu:g,onSelectionStart:h,onSelectionEnd:p,connectionLineType:m,connectionLineStyle:f,connectionLineComponent:y,connectionLineContainerStyle:x,selectionKeyCode:w,selectionOnDrag:S,selectionMode:b,multiSelectionKeyCode:v,panActivationKeyCode:C,zoomActivationKeyCode:E,deleteKeyCode:k,onlyRenderVisibleElements:N,elementsSelectable:M,defaultViewport:P,translateExtent:O,minZoom:I,maxZoom:D,preventScrolling:z,defaultMarkerColor:R,zoomOnScroll:A,zoomOnPinch:L,panOnScroll:B,panOnScrollSpeed:$,panOnScrollMode:_,zoomOnDoubleClick:V,panOnDrag:j,onPaneClick:H,onPaneMouseEnter:T,onPaneMouseMove:Z,onPaneMouseLeave:Y,onPaneScroll:X,onPaneContextMenu:W,paneClickDistance:F,nodeClickDistance:K,onEdgeContextMenu:G,onEdgeMouseEnter:U,onEdgeMouseMove:q,onEdgeMouseLeave:Q,reconnectRadius:J,onReconnect:ee,onReconnectStart:te,onReconnectEnd:ne,noDragClassName:oe,noWheelClassName:re,noPanClassName:ie,disableKeyboardA11y:se,nodeExtent:ae,rfId:de,viewport:le,onViewportChange:ce}){return Ho(e),Ho(t),vt(),(0,dt.useRef)(!1),(0,dt.useEffect)((()=>{}),[]),function(e){const t=mn(),n=(0,dt.useRef)(!1);(0,dt.useEffect)((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(n),function(e){const t=bt(Ao),n=vt();(0,dt.useEffect)((()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(le),(0,o.jsx)(Zn,{onPaneClick:H,onPaneMouseEnter:T,onPaneMouseMove:Z,onPaneMouseLeave:Y,onPaneContextMenu:W,onPaneScroll:X,paneClickDistance:F,deleteKeyCode:k,selectionKeyCode:w,selectionOnDrag:S,selectionMode:b,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:v,panActivationKeyCode:C,zoomActivationKeyCode:E,elementsSelectable:M,zoomOnScroll:A,zoomOnPinch:L,zoomOnDoubleClick:V,panOnScroll:B,panOnScrollSpeed:$,panOnScrollMode:_,panOnDrag:j,defaultViewport:P,translateExtent:O,minZoom:I,maxZoom:D,onSelectionContextMenu:g,preventScrolling:z,noDragClassName:oe,noWheelClassName:re,noPanClassName:ie,disableKeyboardA11y:se,onViewportChange:ce,isControlledViewport:!!le,children:(0,o.jsxs)(Ro,{children:[(0,o.jsx)(Do,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:a,onReconnect:ee,onReconnectStart:te,onReconnectEnd:ne,onlyRenderVisibleElements:N,onEdgeContextMenu:G,onEdgeMouseEnter:U,onEdgeMouseMove:q,onEdgeMouseLeave:Q,reconnectRadius:J,defaultMarkerColor:R,noPanClassName:ie,disableKeyboardA11y:se,rfId:de}),(0,o.jsx)(_o,{style:f,type:m,component:y,containerStyle:x}),(0,o.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,o.jsx)(Gn,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:d,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,nodeClickDistance:K,onlyRenderVisibleElements:N,noPanClassName:ie,noDragClassName:oe,disableKeyboardA11y:se,nodeExtent:ae,rfId:de}),(0,o.jsx)("div",{className:"react-flow__viewport-portal"})]})})}To.displayName="GraphView";const Zo=(0,dt.memo)(To),Yo=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:a,nodeExtent:d}={})=>{const c=new Map,g=new Map,h=new Map,m=new Map,f=o??t??[],y=n??e??[],x=a??[0,0],w=d??l;Re(h,m,f),Oe(y,c,g,{nodeOrigin:x,nodeExtent:w,elevateNodesOnSelect:!1});let S=[0,0,1];if(s&&r&&i){const e=E(c,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:o}=K(e,r,i,.5,2,.1);S=[t,n,o]}return{rfId:"1",width:0,height:0,transform:S,nodes:y,nodeLookup:c,parentLookup:g,edges:f,edgeLookup:m,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:l,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:u.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:x,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...p},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Y,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Xo=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:a,nodeExtent:d})=>{return l=(l,c)=>({...Yo({nodes:e,edges:t,width:r,height:i,fitView:s,nodeOrigin:a,nodeExtent:d,defaultNodes:n,defaultEdges:o}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:o,elevateNodesOnSelect:r}=c();Oe(e,t,n,{nodeOrigin:o,nodeExtent:d,elevateNodesOnSelect:r,checkEquality:!0}),l({nodes:e})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=c();Re(t,n,e),l({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=c();t(e),l({hasDefaultNodes:!0})}if(t){const{setEdges:e}=c();e(t),l({hasDefaultEdges:!0})}},updateNodeInternals:(e,t={triggerFitView:!0})=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,fitViewOnInit:i,fitViewDone:s,fitViewOnInitOptions:a,domNode:d,nodeOrigin:u,nodeExtent:g,debug:h,fitViewSync:p}=c(),{changes:m,updatedInternals:f}=function(e,t,n,o,r,i){const s=o?.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const d=[],l=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(l.transform),u=[];for(const o of e.values()){const e=t.get(o.id);if(e)if(e.hidden)e.internals={...e.internals,handleBounds:void 0},a=!0;else{const s=te(o.nodeElement),l=e.measured.width!==s.width||e.measured.height!==s.height;if(s.width&&s.height&&(l||!e.internals.handleBounds||o.force)){const g=o.nodeElement.getBoundingClientRect(),h=U(e.extent)?e.extent:i;let{positionAbsolute:p}=e.internals;e.parentId&&"parent"===e.extent?p=z(p,s,t.get(e.parentId)):h&&(p=D(p,h,s)),e.measured=s,e.internals={...e.internals,positionAbsolute:p,handleBounds:{source:ae("source",o.nodeElement,g,c,e.id),target:ae("target",o.nodeElement,g,c,e.id)}},e.parentId&&Ie(e,t,n,{nodeOrigin:r}),a=!0,l&&(d.push({id:e.id,type:"dimensions",dimensions:s}),e.expandParent&&e.parentId&&u.push({id:e.id,parentId:e.parentId,rect:_(e,r)}))}}}if(u.length>0){const e=ze(u,t,n,r);d.push(...e)}return{changes:d,updatedInternals:a}}(e,o,r,d,u,g);if(f){if(function(e,t,n){const o=Pe(Ne,n);for(const n of e.values())if(n.parentId)Ie(n,e,t,o);else{const e=v(n,o.nodeOrigin),t=U(n.extent)?n.extent:o.nodeExtent,r=D(e,t,q(n));n.internals.positionAbsolute=r}}(o,r,{nodeOrigin:u,nodeExtent:g}),t.triggerFitView){let e=s;!s&&i&&(e=p({...a,nodes:a?.nodes})),l({fitViewDone:e})}else l({});m?.length>0&&(h&&console.log("React Flow: trigger node changes",m),n?.(m))}},updateNodePositions:(e,t=!1)=>{const n=[],o=[];for(const[r,i]of e){const e=!!(i?.expandParent&&i?.parentId&&i?.position),s={id:r,type:"position",position:e?{x:Math.max(0,i.position.x),y:Math.max(0,i.position.y)}:i.position,dragging:t};e&&n.push({id:r,parentId:i.parentId,rect:{...i.internals.positionAbsolute,width:i.measured.width,height:i.measured.height}}),o.push(s)}if(n.length>0){const{nodeLookup:e,parentLookup:t,nodeOrigin:r}=c(),i=ze(n,e,t,r);o.push(...i)}c().triggerNodeChanges(o)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:r,debug:i}=c();e?.length&&(r&&n(en(e,o)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:r,debug:i}=c();e?.length&&(r&&n(tn(e,o)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=c();t?r(e.map((e=>nn(e,!0)))):(r(on(o,new Set([...e]),!0)),i(on(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=c();t?i(e.map((e=>nn(e,!0)))):(i(on(n,new Set([...e]))),r(on(o,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:s}=c(),a=t||n,d=(e||o).map((e=>{const t=r.get(e.id);return t&&(t.selected=!1),nn(e.id,!1)})),l=a.map((e=>nn(e.id,!1)));i(d),s(l)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=c();t?.setScaleExtent([e,n]),l({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=c();t?.setScaleExtent([n,e]),l({maxZoom:e})},setTranslateExtent:e=>{c().panZoom?.setTranslateExtent(e),l({translateExtent:e})},setPaneClickDistance:e=>{c().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o}=c(),r=t.reduce(((e,t)=>t.selected?[...e,nn(t.id,!1)]:e),[]),i=e.reduce(((e,t)=>t.selected?[...e,nn(t.id,!1)]:e),[]);n(r),o(i)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:i,nodeExtent:s}=c();e[0][0]===s[0][0]&&e[0][1]===s[0][1]&&e[1][0]===s[1][0]&&e[1][1]===s[1][1]||(Oe(t,n,o,{nodeOrigin:r,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1}),l({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:o,panZoom:r,translateExtent:i}=c();return async function({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}({delta:e,panZoom:r,transform:t,translateExtent:i,width:n,height:o})},fitView:e=>{const{panZoom:t,width:n,height:o,minZoom:r,maxZoom:i,nodeLookup:s}=c();return t?P({nodes:M(s,e),width:n,height:o,panZoom:t,minZoom:r,maxZoom:i},e):Promise.resolve(!1)},fitViewSync:e=>{const{panZoom:t,width:n,height:o,minZoom:r,maxZoom:i,nodeLookup:s}=c();if(!t)return!1;const a=M(s,e);return P({nodes:a,width:n,height:o,panZoom:t,minZoom:r,maxZoom:i},e),a.size>0},cancelConnection:()=>{l({connection:{...p}})},updateConnection:e=>{l({connection:e})},reset:()=>l({...Yo()})}),c=Object.is,l?mt(l,c):mt;var l,c};function Wo({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:a,nodeOrigin:d,nodeExtent:l,children:c}){const[u]=(0,dt.useState)((()=>Xo({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:a,nodeOrigin:d,nodeExtent:l})));return(0,o.jsx)(wt,{value:u,children:(0,o.jsx)(hn,{children:c})})}function Fo({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:a,fitView:d,nodeOrigin:l,nodeExtent:c}){return(0,dt.useContext)(xt)?(0,o.jsx)(o.Fragment,{children:e}):(0,o.jsx)(Wo,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:a,fitView:d,nodeOrigin:l,nodeExtent:c,children:e})}const Ko={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var Go=ln((function({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:s,nodeTypes:a,edgeTypes:d,onNodeClick:c,onEdgeClick:u,onInit:p,onMove:f,onMoveStart:y,onMoveEnd:x,onConnect:w,onConnectStart:S,onConnectEnd:b,onClickConnectStart:v,onClickConnectEnd:C,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:P,onNodeDragStart:O,onNodeDrag:I,onNodeDragStop:D,onNodesDelete:z,onEdgesDelete:R,onDelete:A,onSelectionChange:L,onSelectionDragStart:B,onSelectionDrag:$,onSelectionDragStop:_,onSelectionContextMenu:V,onSelectionStart:j,onSelectionEnd:H,onBeforeDelete:T,connectionMode:Z,connectionLineType:Y=m.Bezier,connectionLineStyle:X,connectionLineComponent:W,connectionLineContainerStyle:F,deleteKeyCode:K="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:q=!1,selectionMode:Q=h.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:ee=(G()?"Meta":"Control"),zoomActivationKeyCode:te=(G()?"Meta":"Control"),snapToGrid:ne,snapGrid:oe,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ie,nodesDraggable:se,nodesConnectable:ae,nodesFocusable:de,nodeOrigin:le=jt,edgesFocusable:ce,edgesReconnectable:ue,elementsSelectable:ge=!0,defaultViewport:he=Ht,minZoom:pe=.5,maxZoom:me=2,translateExtent:fe=l,preventScrolling:ye=!0,nodeExtent:xe,defaultMarkerColor:we="#b1b1b7",zoomOnScroll:Se=!0,zoomOnPinch:be=!0,panOnScroll:ve=!1,panOnScrollSpeed:Ce=.5,panOnScrollMode:Ee=g.Free,zoomOnDoubleClick:ke=!0,panOnDrag:Ne=!0,onPaneClick:Me,onPaneMouseEnter:Pe,onPaneMouseMove:Oe,onPaneMouseLeave:Ie,onPaneScroll:De,onPaneContextMenu:ze,paneClickDistance:Re=0,nodeClickDistance:Ae=0,children:Le,onReconnect:Be,onReconnectStart:$e,onReconnectEnd:_e,onEdgeContextMenu:Ve,onEdgeDoubleClick:je,onEdgeMouseEnter:He,onEdgeMouseMove:Te,onEdgeMouseLeave:Ze,reconnectRadius:Ye=10,onNodesChange:Xe,onEdgesChange:We,noDragClassName:Fe="nodrag",noWheelClassName:Ke="nowheel",noPanClassName:Ge="nopan",fitView:Ue,fitViewOptions:qe,connectOnClick:Qe,attributionPosition:Je,proOptions:et,defaultEdgeOptions:tt,elevateNodesOnSelect:nt,elevateEdgesOnSelect:ot,disableKeyboardA11y:rt=!1,autoPanOnConnect:it,autoPanOnNodeDrag:st,autoPanSpeed:at,connectionRadius:lt,isValidConnection:ct,onError:ut,style:gt,id:ht,nodeDragThreshold:pt,viewport:mt,onViewportChange:ft,width:yt,height:xt,colorMode:wt="light",debug:St,...bt},vt){const Ct=ht||"1",Et=function(e){const[t,n]=(0,dt.useState)("system"===e?null:e);return(0,dt.useEffect)((()=>{if("system"!==e)return void n(e);const t=Wt(),o=()=>n(t?.matches?"dark":"light");return o(),t?.addEventListener("change",o),()=>{t?.removeEventListener("change",o)}}),[e]),null!==t?t:Wt()?.matches?"dark":"light"}(wt);return(0,o.jsx)("div",{"data-testid":"rf__wrapper",...bt,style:{...gt,...Ko},ref:vt,className:r(["react-flow",s,Et]),id:ht,children:(0,o.jsxs)(Fo,{nodes:e,edges:t,width:yt,height:xt,fitView:Ue,nodeOrigin:le,nodeExtent:xe,children:[(0,o.jsx)(Zo,{onInit:p,onNodeClick:c,onEdgeClick:u,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:P,nodeTypes:a,edgeTypes:d,connectionLineType:Y,connectionLineStyle:X,connectionLineComponent:W,connectionLineContainerStyle:F,selectionKeyCode:U,selectionOnDrag:q,selectionMode:Q,deleteKeyCode:K,multiSelectionKeyCode:ee,panActivationKeyCode:J,zoomActivationKeyCode:te,onlyRenderVisibleElements:re,defaultViewport:he,translateExtent:fe,minZoom:pe,maxZoom:me,preventScrolling:ye,zoomOnScroll:Se,zoomOnPinch:be,zoomOnDoubleClick:ke,panOnScroll:ve,panOnScrollSpeed:Ce,panOnScrollMode:Ee,panOnDrag:Ne,onPaneClick:Me,onPaneMouseEnter:Pe,onPaneMouseMove:Oe,onPaneMouseLeave:Ie,onPaneScroll:De,onPaneContextMenu:ze,paneClickDistance:Re,nodeClickDistance:Ae,onSelectionContextMenu:V,onSelectionStart:j,onSelectionEnd:H,onReconnect:Be,onReconnectStart:$e,onReconnectEnd:_e,onEdgeContextMenu:Ve,onEdgeDoubleClick:je,onEdgeMouseEnter:He,onEdgeMouseMove:Te,onEdgeMouseLeave:Ze,reconnectRadius:Ye,defaultMarkerColor:we,noDragClassName:Fe,noWheelClassName:Ke,noPanClassName:Ge,rfId:Ct,disableKeyboardA11y:rt,nodeExtent:xe,viewport:mt,onViewportChange:ft}),(0,o.jsx)(Xt,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:b,onClickConnectStart:v,onClickConnectEnd:C,nodesDraggable:se,nodesConnectable:ae,nodesFocusable:de,edgesFocusable:ce,edgesReconnectable:ue,elementsSelectable:ge,elevateNodesOnSelect:nt,elevateEdgesOnSelect:ot,minZoom:pe,maxZoom:me,nodeExtent:xe,onNodesChange:Xe,onEdgesChange:We,snapToGrid:ne,snapGrid:oe,connectionMode:Z,translateExtent:fe,connectOnClick:Qe,defaultEdgeOptions:tt,fitView:Ue,fitViewOptions:qe,onNodesDelete:z,onEdgesDelete:R,onDelete:A,onNodeDragStart:O,onNodeDrag:I,onNodeDragStop:D,onSelectionDrag:$,onSelectionDragStart:B,onSelectionDragStop:_,onMove:f,onMoveStart:y,onMoveEnd:x,noPanClassName:Ge,nodeOrigin:le,rfId:Ct,autoPanOnConnect:it,autoPanOnNodeDrag:st,autoPanSpeed:at,onError:ut,connectionRadius:lt,isValidConnection:ct,selectNodesOnDrag:ie,nodeDragThreshold:pt,onBeforeDelete:T,paneClickDistance:Re,debug:St}),(0,o.jsx)(Vt,{onSelectionChange:L}),Le,(0,o.jsx)(Rt,{proOptions:et,position:Je}),(0,o.jsx)(It,{rfId:Ct,disableKeyboardA11y:rt})]})})}));function Uo({dimensions:e,lineWidth:t,variant:n,className:i}){return(0,o.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:r(["react-flow__background-pattern",n,i])})}function qo({radius:e,className:t}){return(0,o.jsx)("circle",{cx:e,cy:e,r:e,className:r(["react-flow__background-pattern","dots",t])})}var Qo;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Qo||(Qo={}));const Jo={[Qo.Dots]:1,[Qo.Lines]:1,[Qo.Cross]:6},er=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function tr({id:e,variant:t=Qo.Dots,gap:n=20,size:i,lineWidth:s=1,offset:a=0,color:d,bgColor:l,style:c,className:u,patternClassName:g}){const h=(0,dt.useRef)(null),{transform:p,patternId:m}=bt(er,ft),f=i||Jo[t],y=t===Qo.Dots,x=t===Qo.Cross,w=Array.isArray(n)?n:[n,n],S=[w[0]*p[2]||1,w[1]*p[2]||1],b=f*p[2],v=Array.isArray(a)?a:[a,a],C=x?[b,b]:S,E=[v[0]*p[2]||1+C[0]/2,v[1]*p[2]||1+C[1]/2],k=`${m}${e||""}`;return(0,o.jsxs)("svg",{className:r(["react-flow__background",u]),style:{...c,...wn,"--xy-background-color-props":l,"--xy-background-pattern-color-props":d},ref:h,"data-testid":"rf__background",children:[(0,o.jsx)("pattern",{id:k,x:p[0]%S[0],y:p[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:y?(0,o.jsx)(qo,{radius:b/2,className:g}):(0,o.jsx)(Uo,{dimensions:C,lineWidth:s,variant:t,className:g})}),(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}tr.displayName="Background";const nr=(0,dt.memo)(tr);function or(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,o.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function rr(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,o.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function ir(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,o.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sr(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ar(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function dr({children:e,className:t,...n}){return(0,o.jsx)("button",{type:"button",className:r(["react-flow__controls-button",t]),...n,children:e})}const lr=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function cr({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:d,onFitView:l,onInteractiveChange:c,className:u,children:g,position:h="bottom-left",orientation:p="vertical","aria-label":m="React Flow controls"}){const f=vt(),{isInteractive:y,minZoomReached:x,maxZoomReached:w}=bt(lr,ft),{zoomIn:S,zoomOut:b,fitView:v}=mn(),C="horizontal"===p?"horizontal":"vertical";return(0,o.jsxs)(zt,{className:r(["react-flow__controls",C,u]),position:h,style:e,"data-testid":"rf__controls","aria-label":m,children:[t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(dr,{onClick:()=>{S(),a?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w,children:(0,o.jsx)(or,{})}),(0,o.jsx)(dr,{onClick:()=>{b(),d?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x,children:(0,o.jsx)(rr,{})})]}),n&&(0,o.jsx)(dr,{className:"react-flow__controls-fitview",onClick:()=>{v(s),l?.()},title:"fit view","aria-label":"fit view",children:(0,o.jsx)(ir,{})}),i&&(0,o.jsx)(dr,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c?.(!y)},title:"toggle interactivity","aria-label":"toggle interactivity",children:y?(0,o.jsx)(ar,{}):(0,o.jsx)(sr,{})}),g]})}cr.displayName="Controls";const ur=(0,dt.memo)(cr);const gr=(0,dt.memo)((function({id:e,x:t,y:n,width:i,height:s,style:a,color:d,strokeColor:l,strokeWidth:c,className:u,borderRadius:g,shapeRendering:h,selected:p,onClick:m}){const{background:f,backgroundColor:y}=a||{},x=d||f||y;return(0,o.jsx)("rect",{className:r(["react-flow__minimap-node",{selected:p},u]),x:t,y:n,rx:g,ry:g,width:i,height:s,style:{fill:x,stroke:l,strokeWidth:c},shapeRendering:h,onClick:m?t=>m(t,e):void 0})})),hr=e=>e.nodes.map((e=>e.id)),pr=e=>e instanceof Function?e:()=>e;const mr=(0,dt.memo)((function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:a,NodeComponent:d,onClick:l}){const{node:c,x:u,y:g,width:h,height:p}=bt((t=>{const n=t.nodeLookup.get(e),{x:o,y:r}=n.internals.positionAbsolute,{width:i,height:s}=q(n);return{node:n,x:o,y:r,width:i,height:s}}),ft);return c&&!c.hidden&&Q(c)?(0,o.jsx)(d,{x:u,y:g,width:h,height:p,style:c.style,selected:!!c.selected,className:r(c),color:t(c),borderRadius:i,strokeColor:n(c),strokeWidth:s,shapeRendering:a,onClick:l,id:c.id}):null}));var fr=(0,dt.memo)((function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=gr,onClick:a}){const d=bt(hr,ft),l=pr(t),c=pr(e),u=pr(n),g="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,o.jsx)(o.Fragment,{children:d.map((e=>(0,o.jsx)(mr,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:a,shapeRendering:g},e)))})}));const yr=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?j(E(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function xr({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:d="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:u,bgColor:g,maskColor:h,maskStrokeColor:p,maskStrokeWidth:m,position:f="bottom-right",onClick:y,onNodeClick:x,pannable:w=!1,zoomable:S=!1,ariaLabel:b="React Flow mini map",inversePan:v,zoomStep:C=10,offsetScale:E=5}){const k=vt(),N=(0,dt.useRef)(null),{boundingRect:M,viewBB:P,rfId:O,panZoom:I,translateExtent:D,flowWidth:z,flowHeight:R}=bt(yr,ft),A=e?.width??200,L=e?.height??150,B=M.width/A,$=M.height/L,_=Math.max(B,$),V=_*A,j=_*L,H=E*_,T=M.x-(V-M.width)/2-H,Z=M.y-(j-M.height)/2-H,Y=V+2*H,X=j+2*H,W=`react-flow__minimap-desc-${O}`,F=(0,dt.useRef)(0),K=(0,dt.useRef)();F.current=_,(0,dt.useEffect)((()=>{if(N.current&&I)return K.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=(0,s.Lt)(e);return{update:function({translateExtent:e,width:i,height:s,zoomStep:d=10,pannable:l=!0,zoomable:c=!0,inversePan:u=!1}){let g=[0,0];const h=(0,a.s_)().on("start",(e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(g=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])})).on("zoom",l?r=>{const a=n();if("mousemove"!==r.sourceEvent.type&&"touchmove"!==r.sourceEvent.type||!t)return;const d=[r.sourceEvent.clientX??r.sourceEvent.touches[0].clientX,r.sourceEvent.clientY??r.sourceEvent.touches[0].clientY],l=[d[0]-g[0],d[1]-g[1]];g=d;const c=o()*Math.max(a[2],Math.log(a[2]))*(u?-1:1),h={x:a[0]-l[0]*c,y:a[1]-l[1]*c},p=[[0,0],[i,s]];t.setViewportConstrained({x:h.x,y:h.y,zoom:a[2]},p,e)}:null).on("zoom.wheel",c?e=>{const o=n();if("wheel"!==e.sourceEvent.type||!t)return;const r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*d,i=o[2]*Math.pow(2,r);t.scaleTo(i)}:null);r.call(h,{})},destroy:function(){r.on("zoom",null)},pointer:s.Wn}}({domNode:N.current,panZoom:I,getTransform:()=>k.getState().transform,getViewScale:()=>F.current}),()=>{K.current?.destroy()}}),[I]),(0,dt.useEffect)((()=>{K.current?.update({translateExtent:D,width:z,height:R,inversePan:v,pannable:w,zoomStep:C,zoomable:S})}),[w,S,v,C,D,z,R]);const G=y?e=>{const[t,n]=K.current?.pointer(e)||[0,0];y(e,{x:t,y:n})}:void 0,U=x?(0,dt.useCallback)(((e,t)=>{const n=k.getState().nodeLookup.get(t);x(e,n)}),[]):void 0;return(0,o.jsx)(zt,{position:f,style:{...e,"--xy-minimap-background-color-props":"string"==typeof g?g:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof h?h:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof p?p:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof m?m*_:void 0,"--xy-minimap-node-background-color-props":"string"==typeof i?i:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"string"==typeof c?c:void 0},className:r(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,o.jsxs)("svg",{width:A,height:L,viewBox:`${T} ${Z} ${Y} ${X}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":W,ref:N,onClick:G,children:[b&&(0,o.jsx)("title",{id:W,children:b}),(0,o.jsx)(fr,{onClick:U,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:d,nodeStrokeWidth:c,nodeComponent:u}),(0,o.jsx)("path",{className:"react-flow__minimap-mask",d:`M${T-H},${Z-H}h${Y+2*H}v${X+2*H}h${-Y-2*H}z\n        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}xr.displayName="MiniMap";(0,dt.memo)(xr);(0,dt.memo)((function({nodeId:e,position:t,variant:n=Je.Handle,className:i,style:s={},children:a,color:d,minWidth:l=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:p,onResizeStart:m,onResize:f,onResizeEnd:y}){const x=Rn(),w="string"==typeof e?e:x,S=vt(),b=(0,dt.useRef)(null),v=n===Je.Line?"right":"bottom-right",C=t??v,E=(0,dt.useRef)(null);(0,dt.useEffect)((()=>{if(b.current&&w)return E.current||(E.current=at({domNode:b.current,nodeId:w,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,domNode:i}=S.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:i}=S.getState(),s=[],a={x:e.x,y:e.y},d=o.get(w);if(d&&d.expandParent&&d.parentId){const t=d.origin??i,n=e.width??d.measured.width,l=e.height??d.measured.height,c=ze([{id:d.id,parentId:d.parentId,rect:{width:n,height:l,...J({x:e.x??d.position.x,y:e.y??d.position.y},{width:n,height:l},d.parentId,o,t)}}],o,r,i);s.push(...c),a.x=e.x?Math.max(t[0]*n,e.x):void 0,a.y=e.y?Math.max(t[1]*l,e.y):void 0}if(void 0!==a.x&&void 0!==a.y){const e={id:w,type:"position",position:{...a}};s.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:w,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};s.push(t)}for(const e of t){const t={...e,type:"position"};s.push(t)}n(s)},onEnd:()=>{const e={id:w,type:"dimensions",resizing:!1};S.getState().triggerNodeChanges([e])}})),E.current.update({controlPosition:C,boundaries:{minWidth:l,minHeight:c,maxWidth:u,maxHeight:g},keepAspectRatio:h,onResizeStart:m,onResize:f,onResizeEnd:y,shouldResize:p}),()=>{E.current?.destroy()}}),[C,l,c,u,g,h,m,f,y,p]);const k=C.split("-"),N=n===Je.Line?"borderColor":"backgroundColor",M=d?{...s,[N]:d}:s;return(0,o.jsx)("div",{className:r(["react-flow__resize-control","nodrag",...k,n,i]),ref:b,style:M,children:a})}));const wr=e=>e.domNode?.querySelector(".react-flow__renderer");function Sr({children:e}){const t=bt(wr);return t?(0,yt.createPortal)(e,t):null}const br=(e,t)=>e?.internals.positionAbsolute.x!==t?.internals.positionAbsolute.x||e?.internals.positionAbsolute.y!==t?.internals.positionAbsolute.y||e?.measured.width!==t?.measured.width||e?.measured.height!==t?.measured.height||e?.selected!==t?.selected||e?.internals.z!==t?.internals.z,vr=(e,t)=>{if(e.size!==t.size)return!1;for(const[n,o]of e)if(br(o,t.get(n)))return!1;return!0},Cr=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2],selectedNodesCount:e.nodes.filter((e=>e.selected)).length});function Er({nodeId:e,children:t,className:n,style:i,isVisible:s,position:a=y.Top,offset:d=10,align:l="center",...c}){const u=Rn(),g=bt((0,dt.useCallback)((t=>(Array.isArray(e)?e:[e||u||""]).reduce(((e,n)=>{const o=t.nodeLookup.get(n);return o&&e.set(o.id,o),e}),new Map)),[e,u]),vr),{x:h,y:p,zoom:m,selectedNodesCount:f}=bt(Cr,ft);if(!("boolean"==typeof s?s:1===g.size&&g.values().next().value.selected&&1===f)||!g.size)return null;const x=E(g),w=Array.from(g.values()),S=Math.max(...w.map((e=>e.internals.z+1))),b={position:"absolute",transform:ke(x,{x:h,y:p,zoom:m},a,d,l),zIndex:S,...i};return(0,o.jsx)(Sr,{children:(0,o.jsx)("div",{style:b,className:r(["react-flow__node-toolbar",n]),...c,"data-id":w.reduce(((e,t)=>`${e}${t.id} `),"").trim(),children:t})})}},72721:()=>{}}]);
//# sourceMappingURL=5594.bundle.645b0472d5cc309a1a8d.js.map