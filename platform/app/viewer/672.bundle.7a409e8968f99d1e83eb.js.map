{"version":3,"file":"672.bundle.7a409e8968f99d1e83eb.js","mappings":"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","sources":["webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/ChangeTypes.js","webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/Events.js","webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/SegmentationRepresentations.js","webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/StrategyCallbacks.js","webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/ToolBindings.js","webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/ToolModes.js","webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/Touch.js","webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/AnnotationStyleStates.js","webpack:///../../../node_modules/@cornerstonejs/tools/dist/esm/enums/WorkerTypes.js","webpack:///../../../modes/t-chaii/src/toolbarButtons.ts","webpack:///../../../modes/t-chaii/src/segmentationButtons.ts","webpack:///../../../modes/t-chaii/src/initToolGroups.ts","webpack:///../../../modes/t-chaii/src/id.ts","webpack:///../../../modes/t-chaii/api/index.ts","webpack:///../../../modes/t-chaii/src/index.tsx"],"sourcesContent":["var ChangeTypes;\n(function (ChangeTypes) {\n    ChangeTypes[\"Interaction\"] = \"Interaction\";\n    ChangeTypes[\"HandlesUpdated\"] = \"HandlesUpdated\";\n    ChangeTypes[\"StatsUpdated\"] = \"StatsUpdated\";\n    ChangeTypes[\"InitialSetup\"] = \"InitialSetup\";\n    ChangeTypes[\"Completed\"] = \"Completed\";\n    ChangeTypes[\"InterpolationUpdated\"] = \"InterpolationUpdated\";\n})(ChangeTypes || (ChangeTypes = {}));\nexport default ChangeTypes;\n","var Events;\n(function (Events) {\n    Events[\"TOOL_ACTIVATED\"] = \"CORNERSTONE_TOOLS_TOOL_ACTIVATED\";\n    Events[\"TOOLGROUP_VIEWPORT_ADDED\"] = \"CORNERSTONE_TOOLS_TOOLGROUP_VIEWPORT_ADDED\";\n    Events[\"TOOLGROUP_VIEWPORT_REMOVED\"] = \"CORNERSTONE_TOOLS_TOOLGROUP_VIEWPORT_REMOVED\";\n    Events[\"TOOL_MODE_CHANGED\"] = \"CORNERSTONE_TOOLS_TOOL_MODE_CHANGED\";\n    Events[\"ANNOTATION_ADDED\"] = \"CORNERSTONE_TOOLS_ANNOTATION_ADDED\";\n    Events[\"ANNOTATION_COMPLETED\"] = \"CORNERSTONE_TOOLS_ANNOTATION_COMPLETED\";\n    Events[\"ANNOTATION_MODIFIED\"] = \"CORNERSTONE_TOOLS_ANNOTATION_MODIFIED\";\n    Events[\"ANNOTATION_REMOVED\"] = \"CORNERSTONE_TOOLS_ANNOTATION_REMOVED\";\n    Events[\"ANNOTATION_SELECTION_CHANGE\"] = \"CORNERSTONE_TOOLS_ANNOTATION_SELECTION_CHANGE\";\n    Events[\"ANNOTATION_LOCK_CHANGE\"] = \"CORNERSTONE_TOOLS_ANNOTATION_LOCK_CHANGE\";\n    Events[\"ANNOTATION_VISIBILITY_CHANGE\"] = \"CORNERSTONE_TOOLS_ANNOTATION_VISIBILITY_CHANGE\";\n    Events[\"ANNOTATION_RENDERED\"] = \"CORNERSTONE_TOOLS_ANNOTATION_RENDERED\";\n    Events[\"ANNOTATION_INTERPOLATION_PROCESS_COMPLETED\"] = \"CORNERSTONE_TOOLS_ANNOTATION_INTERPOLATION_PROCESS_COMPLETED\";\n    Events[\"INTERPOLATED_ANNOTATIONS_REMOVED\"] = \"CORNERSTONE_TOOLS_INTERPOLATED_ANNOTATIONS_REMOVED\";\n    Events[\"SEGMENTATION_MODIFIED\"] = \"CORNERSTONE_TOOLS_SEGMENTATION_MODIFIED\";\n    Events[\"SEGMENTATION_RENDERED\"] = \"CORNERSTONE_TOOLS_SEGMENTATION_RENDERED\";\n    Events[\"SEGMENTATION_REPRESENTATION_ADDED\"] = \"CORNERSTONE_TOOLS_SEGMENTATION_REPRESENTATION_ADDED\";\n    Events[\"SEGMENTATION_ADDED\"] = \"CORNERSTONE_TOOLS_SEGMENTATION_ADDED\";\n    Events[\"SEGMENTATION_REPRESENTATION_MODIFIED\"] = \"CORNERSTONE_TOOLS_SEGMENTATION_REPRESENTATION_MODIFIED\";\n    Events[\"SEGMENTATION_REMOVED\"] = \"CORNERSTONE_TOOLS_SEGMENTATION_REMOVED\";\n    Events[\"SEGMENTATION_REPRESENTATION_REMOVED\"] = \"CORNERSTONE_TOOLS_SEGMENTATION_REPRESENTATION_REMOVED\";\n    Events[\"SEGMENTATION_DATA_MODIFIED\"] = \"CORNERSTONE_TOOLS_SEGMENTATION_DATA_MODIFIED\";\n    Events[\"KEY_DOWN\"] = \"CORNERSTONE_TOOLS_KEY_DOWN\";\n    Events[\"KEY_UP\"] = \"CORNERSTONE_TOOLS_KEY_UP\";\n    Events[\"MOUSE_DOWN\"] = \"CORNERSTONE_TOOLS_MOUSE_DOWN\";\n    Events[\"MOUSE_UP\"] = \"CORNERSTONE_TOOLS_MOUSE_UP\";\n    Events[\"MOUSE_DOWN_ACTIVATE\"] = \"CORNERSTONE_TOOLS_MOUSE_DOWN_ACTIVATE\";\n    Events[\"MOUSE_DRAG\"] = \"CORNERSTONE_TOOLS_MOUSE_DRAG\";\n    Events[\"MOUSE_MOVE\"] = \"CORNERSTONE_TOOLS_MOUSE_MOVE\";\n    Events[\"MOUSE_CLICK\"] = \"CORNERSTONE_TOOLS_MOUSE_CLICK\";\n    Events[\"MOUSE_DOUBLE_CLICK\"] = \"CORNERSTONE_TOOLS_MOUSE_DOUBLE_CLICK\";\n    Events[\"MOUSE_WHEEL\"] = \"CORNERSTONE_TOOLS_MOUSE_WHEEL\";\n    Events[\"TOUCH_START\"] = \"CORNERSTONE_TOOLS_TOUCH_START\";\n    Events[\"TOUCH_START_ACTIVATE\"] = \"CORNERSTONE_TOOLS_TOUCH_START_ACTIVATE\";\n    Events[\"TOUCH_PRESS\"] = \"CORNERSTONE_TOOLS_TOUCH_PRESS\";\n    Events[\"TOUCH_DRAG\"] = \"CORNERSTONE_TOOLS_TOUCH_DRAG\";\n    Events[\"TOUCH_END\"] = \"CORNERSTONE_TOOLS_TOUCH_END\";\n    Events[\"TOUCH_TAP\"] = \"CORNERSTONE_TOOLS_TAP\";\n    Events[\"TOUCH_SWIPE\"] = \"CORNERSTONE_TOOLS_SWIPE\";\n})(Events || (Events = {}));\nexport default Events;\n","var SegmentationRepresentations;\n(function (SegmentationRepresentations) {\n    SegmentationRepresentations[\"Labelmap\"] = \"Labelmap\";\n    SegmentationRepresentations[\"Contour\"] = \"Contour\";\n    SegmentationRepresentations[\"Surface\"] = \"Surface\";\n})(SegmentationRepresentations || (SegmentationRepresentations = {}));\nexport default SegmentationRepresentations;\n","var StrategyCallbacks;\n(function (StrategyCallbacks) {\n    StrategyCallbacks[\"OnInteractionStart\"] = \"onInteractionStart\";\n    StrategyCallbacks[\"OnInteractionEnd\"] = \"onInteractionEnd\";\n    StrategyCallbacks[\"Preview\"] = \"preview\";\n    StrategyCallbacks[\"RejectPreview\"] = \"rejectPreview\";\n    StrategyCallbacks[\"AcceptPreview\"] = \"acceptPreview\";\n    StrategyCallbacks[\"Fill\"] = \"fill\";\n    StrategyCallbacks[\"StrategyFunction\"] = \"strategyFunction\";\n    StrategyCallbacks[\"CreateIsInThreshold\"] = \"createIsInThreshold\";\n    StrategyCallbacks[\"Initialize\"] = \"initialize\";\n    StrategyCallbacks[\"INTERNAL_setValue\"] = \"setValue\";\n    StrategyCallbacks[\"ComputeInnerCircleRadius\"] = \"computeInnerCircleRadius\";\n})(StrategyCallbacks || (StrategyCallbacks = {}));\nexport default StrategyCallbacks;\n","var MouseBindings;\n(function (MouseBindings) {\n    MouseBindings[MouseBindings[\"Primary\"] = 1] = \"Primary\";\n    MouseBindings[MouseBindings[\"Secondary\"] = 2] = \"Secondary\";\n    MouseBindings[MouseBindings[\"Primary_And_Secondary\"] = 3] = \"Primary_And_Secondary\";\n    MouseBindings[MouseBindings[\"Auxiliary\"] = 4] = \"Auxiliary\";\n    MouseBindings[MouseBindings[\"Primary_And_Auxiliary\"] = 5] = \"Primary_And_Auxiliary\";\n    MouseBindings[MouseBindings[\"Secondary_And_Auxiliary\"] = 6] = \"Secondary_And_Auxiliary\";\n    MouseBindings[MouseBindings[\"Primary_And_Secondary_And_Auxiliary\"] = 7] = \"Primary_And_Secondary_And_Auxiliary\";\n    MouseBindings[MouseBindings[\"Fourth_Button\"] = 8] = \"Fourth_Button\";\n    MouseBindings[MouseBindings[\"Fifth_Button\"] = 16] = \"Fifth_Button\";\n    MouseBindings[MouseBindings[\"Wheel\"] = 524288] = \"Wheel\";\n    MouseBindings[MouseBindings[\"Wheel_Primary\"] = 524289] = \"Wheel_Primary\";\n})(MouseBindings || (MouseBindings = {}));\nvar KeyboardBindings;\n(function (KeyboardBindings) {\n    KeyboardBindings[KeyboardBindings[\"Shift\"] = 16] = \"Shift\";\n    KeyboardBindings[KeyboardBindings[\"Ctrl\"] = 17] = \"Ctrl\";\n    KeyboardBindings[KeyboardBindings[\"Alt\"] = 18] = \"Alt\";\n    KeyboardBindings[KeyboardBindings[\"Meta\"] = 91] = \"Meta\";\n    KeyboardBindings[KeyboardBindings[\"ShiftCtrl\"] = 1617] = \"ShiftCtrl\";\n    KeyboardBindings[KeyboardBindings[\"ShiftAlt\"] = 1618] = \"ShiftAlt\";\n    KeyboardBindings[KeyboardBindings[\"ShiftMeta\"] = 1691] = \"ShiftMeta\";\n    KeyboardBindings[KeyboardBindings[\"CtrlAlt\"] = 1718] = \"CtrlAlt\";\n    KeyboardBindings[KeyboardBindings[\"CtrlMeta\"] = 1791] = \"CtrlMeta\";\n    KeyboardBindings[KeyboardBindings[\"AltMeta\"] = 1891] = \"AltMeta\";\n})(KeyboardBindings || (KeyboardBindings = {}));\nexport { MouseBindings, KeyboardBindings };\n","var ToolModes;\n(function (ToolModes) {\n    ToolModes[\"Active\"] = \"Active\";\n    ToolModes[\"Passive\"] = \"Passive\";\n    ToolModes[\"Enabled\"] = \"Enabled\";\n    ToolModes[\"Disabled\"] = \"Disabled\";\n})(ToolModes || (ToolModes = {}));\nexport default ToolModes;\n","var Swipe;\n(function (Swipe) {\n    Swipe[\"UP\"] = \"UP\";\n    Swipe[\"DOWN\"] = \"DOWN\";\n    Swipe[\"LEFT\"] = \"LEFT\";\n    Swipe[\"RIGHT\"] = \"RIGHT\";\n})(Swipe || (Swipe = {}));\nexport { Swipe };\n","var AnnotationStyleStates;\n(function (AnnotationStyleStates) {\n    AnnotationStyleStates[\"Default\"] = \"\";\n    AnnotationStyleStates[\"Highlighted\"] = \"Highlighted\";\n    AnnotationStyleStates[\"Selected\"] = \"Selected\";\n    AnnotationStyleStates[\"Locked\"] = \"Locked\";\n    AnnotationStyleStates[\"AutoGenerated\"] = \"AutoGenerated\";\n})(AnnotationStyleStates || (AnnotationStyleStates = {}));\nexport default AnnotationStyleStates;\n","var ChangeTypes;\n(function (ChangeTypes) {\n    ChangeTypes[\"POLYSEG_CONTOUR_TO_LABELMAP\"] = \"Converting Contour to Labelmap\";\n    ChangeTypes[\"POLYSEG_SURFACE_TO_LABELMAP\"] = \"Converting Surfaces to Labelmap\";\n    ChangeTypes[\"POLYSEG_CONTOUR_TO_SURFACE\"] = \"Converting Contour to Surface\";\n    ChangeTypes[\"POLYSEG_LABELMAP_TO_SURFACE\"] = \"Converting Labelmap to Surface\";\n    ChangeTypes[\"SURFACE_CLIPPING\"] = \"Clipping Surfaces\";\n})(ChangeTypes || (ChangeTypes = {}));\nexport default ChangeTypes;\n","import type { Button } from '@ohif/core/types';\nimport { ToolbarService, ViewportGridService } from '@ohif/core';\n\nconst { createButton } = ToolbarService;\n\nconst ReferenceLinesListeners: RunCommand = [\n  {\n    commandName: 'setSourceViewportForReferenceLinesTool',\n    context: 'CORNERSTONE',\n  },\n];\n\nexport const setToolActiveToolbar = {\n  commandName: 'setToolActiveToolbar',\n  commandOptions: {\n    toolGroupIds: ['default', 'mpr', 'SRToolGroup', 'volume3d'],\n  },\n};\n\nconst toolbarButtons: Button[] = [\n  {\n    id: 'Zoom',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-zoom',\n      label: 'Zoom',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'WindowLevel',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-window-level',\n      label: 'Window Level',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'Pan',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-move',\n      label: 'Pan',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'TrackballRotate',\n    uiType: 'ohif.radioGroup',\n    props: {\n      type: 'tool',\n      icon: 'tool-3d-rotate',\n      label: '3D Rotate',\n      commands: setToolActiveToolbar,\n      evaluate: {\n        name: 'evaluate.cornerstoneTool',\n        disabledText: 'Select a 3D viewport to enable this tool',\n      },\n    },\n  },\n  {\n    id: 'Capture',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-capture',\n      label: 'Capture',\n      commands: 'showDownloadViewportModal',\n      evaluate: [\n        'evaluate.action',\n        {\n          name: 'evaluate.viewport.supported',\n          unsupportedViewportTypes: ['video', 'wholeSlide'],\n        },\n      ],\n    },\n  },\n  {\n    id: 'Layout',\n    uiType: 'ohif.layoutSelector',\n    props: {\n      rows: 3,\n      columns: 4,\n      evaluate: 'evaluate.action',\n      commands: 'setViewportGridLayout',\n    },\n  },\n  {\n    id: 'Crosshairs',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-crosshair',\n      label: 'Crosshairs',\n      commands: {\n        commandName: 'setToolActiveToolbar',\n        commandOptions: {\n          toolGroupIds: ['mpr'],\n        },\n      },\n      evaluate: {\n        name: 'evaluate.cornerstoneTool',\n        disabledText: 'Select an MPR viewport to enable this tool',\n      },\n    },\n  },\n  {\n    id: 'MoreTools',\n    uiType: 'ohif.splitButton',\n    props: {\n      groupId: 'MoreTools',\n      evaluate: 'evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList',\n      primary: createButton({\n        id: 'Reset',\n        icon: 'tool-reset',\n        tooltip: 'Reset View',\n        label: 'Reset',\n        commands: 'resetViewport',\n        evaluate: 'evaluate.action',\n      }),\n      secondary: {\n        icon: 'chevron-down',\n        label: '',\n        tooltip: 'More Tools',\n      },\n      items: [\n        createButton({\n          id: 'Reset',\n          icon: 'tool-reset',\n          label: 'Reset View',\n          tooltip: 'Reset View',\n          commands: 'resetViewport',\n          evaluate: 'evaluate.action',\n        }),\n        createButton({\n          id: 'rotate-right',\n          icon: 'tool-rotate-right',\n          label: 'Rotate Right',\n          tooltip: 'Rotate +90',\n          commands: 'rotateViewportCW',\n          evaluate: 'evaluate.action',\n        }),\n        createButton({\n          id: 'flipHorizontal',\n          icon: 'tool-flip-horizontal',\n          label: 'Flip Horizontal',\n          tooltip: 'Flip Horizontally',\n          commands: 'flipViewportHorizontal',\n          evaluate: [\n            'evaluate.viewportProperties.toggle',\n            {\n              name: 'evaluate.viewport.supported',\n              unsupportedViewportTypes: ['volume3d'],\n            },\n          ],\n        }),\n        createButton({\n          id: 'ReferenceLines',\n          icon: 'tool-referenceLines',\n          label: 'Reference Lines',\n          tooltip: 'Show Reference Lines',\n          commands: 'toggleEnabledDisabledToolbar',\n          listeners: {\n            [ViewportGridService.EVENTS.ACTIVE_VIEWPORT_ID_CHANGED]: ReferenceLinesListeners,\n            [ViewportGridService.EVENTS.VIEWPORTS_READY]: ReferenceLinesListeners,\n          },\n          evaluate: 'evaluate.cornerstoneTool.toggle',\n        }),\n        createButton({\n          id: 'ImageOverlayViewer',\n          icon: 'toggle-dicom-overlay',\n          label: 'Image Overlay',\n          tooltip: 'Toggle Image Overlay',\n          commands: 'toggleEnabledDisabledToolbar',\n          evaluate: 'evaluate.cornerstoneTool.toggle',\n        }),\n        createButton({\n          id: 'StackScroll',\n          icon: 'tool-stack-scroll',\n          label: 'Stack Scroll',\n          tooltip: 'Stack Scroll',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'invert',\n          icon: 'tool-invert',\n          label: 'Invert',\n          tooltip: 'Invert Colors',\n          commands: 'invertViewport',\n          evaluate: 'evaluate.viewportProperties.toggle',\n        }),\n        createButton({\n          id: 'Probe',\n          icon: 'tool-probe',\n          label: 'Probe',\n          tooltip: 'Probe',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'Cine',\n          icon: 'tool-cine',\n          label: 'Cine',\n          tooltip: 'Cine',\n          commands: 'toggleCine',\n          evaluate: [\n            'evaluate.cine',\n            {\n              name: 'evaluate.viewport.supported',\n              unsupportedViewportTypes: ['volume3d'],\n            },\n          ],\n        }),\n        createButton({\n          id: 'Angle',\n          icon: 'tool-angle',\n          label: 'Angle',\n          tooltip: 'Angle',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'Magnify',\n          icon: 'tool-magnify',\n          label: 'Zoom-in',\n          tooltip: 'Zoom-in',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'RectangleROI',\n          icon: 'tool-rectangle',\n          label: 'Rectangle',\n          tooltip: 'Rectangle',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'CalibrationLine',\n          icon: 'tool-calibration',\n          label: 'Calibration',\n          tooltip: 'Calibration Line',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'TagBrowser',\n          icon: 'dicom-tag-browser',\n          label: 'Dicom Tag Browser',\n          tooltip: 'Dicom Tag Browser',\n          commands: 'openDICOMTagViewer',\n        }),\n        createButton({\n          id: 'AdvancedMagnify',\n          icon: 'icon-tool-loupe',\n          label: 'Magnify Probe',\n          tooltip: 'Magnify Probe',\n          commands: 'toggleActiveDisabledToolbar',\n          evaluate: 'evaluate.cornerstoneTool.toggle.ifStrictlyDisabled',\n        }),\n        createButton({\n          id: 'UltrasoundDirectionalTool',\n          icon: 'icon-tool-ultrasound-bidirectional',\n          label: 'Ultrasound Directional',\n          tooltip: 'Ultrasound Directional',\n          commands: setToolActiveToolbar,\n          evaluate: [\n            'evaluate.cornerstoneTool',\n            {\n              name: 'evaluate.modality.supported',\n              supportedModalities: ['US'],\n            },\n          ],\n        }),\n        createButton({\n          id: 'WindowLevelRegion',\n          icon: 'icon-tool-window-region',\n          label: 'Window Level Region',\n          tooltip: 'Window Level Region',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n      ],\n    },\n  },\n];\n\nexport default toolbarButtons;\n","import type { Button } from '@ohif/core/types';\n\nconst toolbarButtons: Button[] = [\n  {\n    id: 'BrushTools',\n    uiType: 'ohif.buttonGroup',\n    props: {\n      groupId: 'BrushTools',\n      items: [\n        {\n          id: 'Brush',\n          icon: 'icon-tool-brush',\n          label: 'Brush',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['CircularBrush', 'SphereBrush'],\n            disabledText: 'Create new segmentation to enable this tool.',\n          },\n          options: [\n            {\n              name: 'Radius (mm)',\n              id: 'brush-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 25,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: { toolNames: ['CircularBrush', 'SphereBrush'] },\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'brush-mode',\n              value: 'CircularBrush',\n              values: [\n                { value: 'CircularBrush', label: 'Circle' },\n                { value: 'SphereBrush', label: 'Sphere' },\n              ],\n              commands: 'setToolActiveToolbar',\n            },\n          ],\n        },\n        {\n          id: 'Eraser',\n          icon: 'icon-tool-eraser',\n          label: 'Eraser',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['CircularEraser', 'SphereEraser'],\n          },\n          options: [\n            {\n              name: 'Radius (mm)',\n              id: 'eraser-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 25,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: { toolNames: ['CircularEraser', 'SphereEraser'] },\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'eraser-mode',\n              value: 'CircularEraser',\n              values: [\n                { value: 'CircularEraser', label: 'Circle' },\n                { value: 'SphereEraser', label: 'Sphere' },\n              ],\n              commands: 'setToolActiveToolbar',\n            },\n          ],\n        },\n        {\n          id: 'Threshold',\n          icon: 'icon-tool-threshold',\n          label: 'Threshold Tool',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\n          },\n          options: [\n            {\n              name: 'Radius (mm)',\n              id: 'threshold-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 25,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: {\n                  toolNames: [\n                    'ThresholdCircularBrush',\n                    'ThresholdSphereBrush',\n                    'ThresholdCircularBrushDynamic',\n                  ],\n                },\n              },\n            },\n\n            {\n              name: 'Threshold',\n              type: 'radio',\n              id: 'dynamic-mode',\n              value: 'ThresholdRange',\n              values: [\n                { value: 'ThresholdDynamic', label: 'Dynamic' },\n                { value: 'ThresholdRange', label: 'Range' },\n              ],\n              commands: ({ value, commandsManager, options }) => {\n                if (value === 'ThresholdDynamic') {\n                  commandsManager.run('setToolActive', {\n                    toolName: 'ThresholdCircularBrushDynamic',\n                  });\n\n                  return;\n                }\n\n                // check the condition of the threshold-range option\n                const thresholdRangeOption = options.find(\n                  option => option.id === 'threshold-shape'\n                );\n\n                commandsManager.run('setToolActiveToolbar', {\n                  toolName: thresholdRangeOption.value,\n                });\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'threshold-shape',\n              value: 'ThresholdCircularBrush',\n              values: [\n                { value: 'ThresholdCircularBrush', label: 'Circle' },\n                { value: 'ThresholdSphereBrush', label: 'Sphere' },\n              ],\n              condition: ({ options }) =>\n                options.find(option => option.id === 'dynamic-mode').value === 'ThresholdRange',\n              commands: 'setToolActiveToolbar',\n            },\n            {\n              name: 'ThresholdRange',\n              type: 'double-range',\n              id: 'threshold-range',\n              min: -1000,\n              max: 1000,\n              step: 1,\n              value: [100, 600],\n              condition: ({ options }) =>\n                options.find(option => option.id === 'dynamic-mode').value === 'ThresholdRange',\n              commands: {\n                commandName: 'setThresholdRange',\n                commandOptions: {\n                  toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\n                },\n              },\n            },\n          ],\n        },\n      ],\n    },\n  },\n  {\n    id: 'Shapes',\n    uiType: 'ohif.radioGroup',\n    props: {\n      label: 'Shapes',\n      evaluate: {\n        name: 'evaluate.cornerstone.segmentation',\n        toolNames: ['CircleScissor', 'SphereScissor', 'RectangleScissor'],\n      },\n      icon: 'icon-tool-shape',\n      options: [\n        {\n          name: 'Shape',\n          type: 'radio',\n          value: 'CircleScissor',\n          id: 'shape-mode',\n          values: [\n            { value: 'CircleScissor', label: 'Circle' },\n            { value: 'SphereScissor', label: 'Sphere' },\n            { value: 'RectangleScissor', label: 'Rectangle' },\n          ],\n          commands: 'setToolActiveToolbar',\n        },\n      ],\n    },\n  },\n];\n\nexport default toolbarButtons;\n","const colours = {\n  'viewport-0': 'rgb(200, 0, 0)',\n  'viewport-1': 'rgb(200, 200, 0)',\n  'viewport-2': 'rgb(0, 200, 0)',\n};\n\nconst colorsByOrientation = {\n  axial: 'rgb(200, 0, 0)',\n  sagittal: 'rgb(200, 200, 0)',\n  coronal: 'rgb(0, 200, 0)',\n};\n\nfunction createTools(utilityModule) {\n  const { toolNames, Enums } = utilityModule.exports;\n  return {\n    active: [\n      { toolName: toolNames.WindowLevel, bindings: [{ mouseButton: Enums.MouseBindings.Primary }] },\n      { toolName: toolNames.Pan, bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }] },\n      { toolName: toolNames.Zoom, bindings: [{ mouseButton: Enums.MouseBindings.Secondary }] },\n      { toolName: toolNames.StackScroll, bindings: [{ mouseButton: Enums.MouseBindings.Wheel }] },\n    ],\n    passive: [\n      {\n        toolName: 'CircularBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'FILL_INSIDE_CIRCLE',\n        },\n      },\n      {\n        toolName: 'CircularEraser',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'ERASE_INSIDE_CIRCLE',\n        },\n      },\n      {\n        toolName: 'SphereBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'FILL_INSIDE_SPHERE',\n        },\n      },\n      {\n        toolName: 'SphereEraser',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'ERASE_INSIDE_SPHERE',\n        },\n      },\n      {\n        toolName: 'ThresholdCircularBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\n        },\n      },\n      {\n        toolName: 'ThresholdSphereBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'THRESHOLD_INSIDE_SPHERE',\n        },\n      },\n      {\n        toolName: 'ThresholdCircularBrushDynamic',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\n          // preview: {\n          //   enabled: true,\n          // },\n          strategySpecificConfiguration: {\n            // to use the use the center segment index to determine\n            // if inside -> same segment, if outside -> eraser\n            // useCenterSegmentIndex: true,\n            THRESHOLD: {\n              isDynamic: true,\n              dynamicRadius: 3,\n            },\n          },\n        },\n      },\n      { toolName: toolNames.CircleScissors },\n      { toolName: toolNames.RectangleScissors },\n      { toolName: toolNames.SphereScissors },\n      { toolName: toolNames.StackScroll },\n      { toolName: toolNames.Magnify },\n      { toolName: toolNames.WindowLevelRegion },\n\n      { toolName: toolNames.UltrasoundDirectional },\n    ],\n    disabled: [{ toolName: toolNames.ReferenceLines }, { toolName: toolNames.AdvancedMagnify }],\n  };\n}\n\nfunction initDefaultToolGroup(extensionManager, toolGroupService, commandsManager, toolGroupId) {\n  const utilityModule = extensionManager.getModuleEntry(\n    '@ohif/extension-cornerstone.utilityModule.tools'\n  );\n  const tools = createTools(utilityModule);\n  toolGroupService.createToolGroupAndAddTools(toolGroupId, tools);\n}\n\nfunction initMPRToolGroup(extensionManager, toolGroupService, commandsManager) {\n  const utilityModule = extensionManager.getModuleEntry(\n    '@ohif/extension-cornerstone.utilityModule.tools'\n  );\n  const servicesManager = extensionManager._servicesManager;\n  const { cornerstoneViewportService } = servicesManager.services;\n  const tools = createTools(utilityModule);\n  tools.disabled.push(\n    {\n      toolName: utilityModule.exports.toolNames.Crosshairs,\n      configuration: {\n        viewportIndicators: true,\n        viewportIndicatorsConfig: {\n          circleRadius: 5,\n          xOffset: 0.95,\n          yOffset: 0.05,\n        },\n        disableOnPassive: true,\n        autoPan: {\n          enabled: false,\n          panSize: 10,\n        },\n        getReferenceLineColor: viewportId => {\n          const viewportInfo = cornerstoneViewportService.getViewportInfo(viewportId);\n          const viewportOptions = viewportInfo?.viewportOptions;\n          if (viewportOptions) {\n            return (\n              colours[viewportOptions.id] ||\n              colorsByOrientation[viewportOptions.orientation] ||\n              '#0c0'\n            );\n          } else {\n            console.warn('missing viewport?', viewportId);\n            return '#0c0';\n          }\n        },\n      },\n    },\n    { toolName: utilityModule.exports.toolNames.ReferenceLines }\n  );\n  toolGroupService.createToolGroupAndAddTools('mpr', tools);\n}\n\nfunction initVolume3DToolGroup(extensionManager, toolGroupService) {\n  const utilityModule = extensionManager.getModuleEntry(\n    '@ohif/extension-cornerstone.utilityModule.tools'\n  );\n\n  const { toolNames, Enums } = utilityModule.exports;\n\n  const tools = {\n    active: [\n      {\n        toolName: toolNames.TrackballRotateTool,\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\n      },\n      {\n        toolName: toolNames.Zoom,\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }],\n      },\n      {\n        toolName: toolNames.Pan,\n        bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\n      },\n    ],\n  };\n\n  toolGroupService.createToolGroupAndAddTools('volume3d', tools);\n}\n\nfunction initToolGroups(extensionManager, toolGroupService, commandsManager) {\n  initDefaultToolGroup(extensionManager, toolGroupService, commandsManager, 'default');\n  initMPRToolGroup(extensionManager, toolGroupService, commandsManager);\n  initVolume3DToolGroup(extensionManager, toolGroupService);\n}\n\nexport default initToolGroups;\n","import packageJson from '../package.json';\n\nconst id = packageJson.name;\n\nexport { id };\n","interface Segment {\n  id: string;\n  created_at: string;\n  updated_at: string;\n  is_deleted: boolean;\n  name: string;\n  label: string;\n  tracking_id: string;\n  affected_organs: string;\n  volume: number;\n  axial_diameter: number | null;\n  coronal_diameter: number | null;\n  sagittal_diameter: number | null;\n  is_target_lession: boolean;\n  classification: string | null;\n  segmentation_type: string;\n  window_width: number | null;\n  window_level: number | null;\n  status: string;\n  lesion_segmentation: string;\n  user: string | null;\n  reviewed_by: string | null;\n  model: string | null;\n  lesion_segments: string[];\n}\n\ninterface SegmentationData {\n  id: string;\n  created_at: string;\n  updated_at: string;\n  is_deleted: boolean;\n  name: string;\n  segmentation_id: string | null;\n  orthanc_id: string;\n  status: string;\n  series: string;\n  segments: Segment[];\n  study_date: string;\n}\n\ninterface SegmentationsResponse {\n  study_id_basal: string;\n  segmentations_data: SegmentationData[];\n}\n\nconst exampleResponse: SegmentationsResponse = {\n  study_id_basal: '1.3.51.0.1.1.172.19.3.128.2882759.2882698',\n  segmentations_data: [\n    {\n      id: 'dc58bced-995f-4ef8-bc13-bfff1c05606f',\n      created_at: '2024-12-04T22:37:09.172700Z',\n      updated_at: '2024-12-04T22:37:09.172716Z',\n      is_deleted: false,\n      name: 'test',\n      segmentation_id: null,\n      orthanc_id: '7c10181e-e506c38b-76f227ef-45328eaf-5e4be833',\n      status: 'FINISHED',\n      series: '38cc8c1c-aa3f-42f7-94da-3d0fcdba8163',\n      segments: [\n        {\n          id: 'cc679843-ad12-4ccd-9851-426664318e3c',\n          created_at: '2024-12-04T22:37:09.174416Z',\n          updated_at: '2024-12-04T22:37:09.174425Z',\n          is_deleted: false,\n          name: 'Segment #1',\n          label: 'Segment #1',\n          tracking_id: '1.2.826.0.1.3680043.8.498.11105252268930645618441703623246770449',\n          affected_organs: 'test',\n          volume: 32318.0,\n          axial_diameter: null,\n          coronal_diameter: null,\n          sagittal_diameter: null,\n          is_target_lession: true,\n          classification: null,\n          segmentation_type: \"('automatic', 'Automatic')\",\n          window_width: null,\n          window_level: null,\n          status: 'FINISHED',\n          lesion_segmentation: 'dc58bced-995f-4ef8-bc13-bfff1c05606f',\n          user: null,\n          reviewed_by: null,\n          model: null,\n          lesion_segments: [],\n        },\n        {\n          id: '8aa7907d-703e-44cc-9efb-c7cc7703e8b0',\n          created_at: '2024-12-04T22:37:09.176353Z',\n          updated_at: '2024-12-04T22:37:09.176362Z',\n          is_deleted: false,\n          name: 'Segment #2',\n          label: 'Segment #2',\n          tracking_id: '1.2.826.0.1.3680043.8.498.12187923523073502176779813617747360192',\n          affected_organs: 'test',\n          volume: 300334.0,\n          axial_diameter: null,\n          coronal_diameter: null,\n          sagittal_diameter: null,\n          is_target_lession: true,\n          classification: null,\n          segmentation_type: \"('automatic', 'Automatic')\",\n          window_width: null,\n          window_level: null,\n          status: 'FINISHED',\n          lesion_segmentation: 'dc58bced-995f-4ef8-bc13-bfff1c05606f',\n          user: null,\n          reviewed_by: null,\n          model: null,\n          lesion_segments: [],\n        },\n        {\n          id: 'cba59ee0-80d7-453a-a16d-264bac5dc522',\n          created_at: '2024-12-04T22:37:09.177894Z',\n          updated_at: '2024-12-04T22:37:09.177903Z',\n          is_deleted: false,\n          name: 'Segment #3',\n          label: 'Segment #3',\n          tracking_id: '1.2.826.0.1.3680043.8.498.13230215384917429116554563969980160699',\n          affected_organs: 'test',\n          volume: 215813.0,\n          axial_diameter: null,\n          coronal_diameter: null,\n          sagittal_diameter: null,\n          is_target_lession: true,\n          classification: null,\n          segmentation_type: \"('automatic', 'Automatic')\",\n          window_width: null,\n          window_level: null,\n          status: 'FINISHED',\n          lesion_segmentation: 'dc58bced-995f-4ef8-bc13-bfff1c05606f',\n          user: null,\n          reviewed_by: null,\n          model: null,\n          lesion_segments: [],\n        },\n      ],\n      study_date: '2023-10-16T00:00:00Z',\n    },\n    {\n      id: 'cdb7e7ae-222c-443d-a05b-50bf15d9fc48',\n      created_at: '2024-12-04T22:39:27.047253Z',\n      updated_at: '2024-12-04T22:39:27.047263Z',\n      is_deleted: false,\n      name: 'test',\n      segmentation_id: null,\n      orthanc_id: 'ab89b09a-a3b5aa40-4afccdef-2c102335-1fd020df',\n      status: 'FINISHED',\n      series: 'c20a2508-b3fe-4203-a4be-e5ab433b1f20',\n      segments: [\n        {\n          id: '789453f3-e433-4ee8-a619-7a3f68af20e3',\n          created_at: '2024-12-04T22:39:27.049034Z',\n          updated_at: '2024-12-04T22:39:27.049041Z',\n          is_deleted: false,\n          name: 'Segment #1',\n          label: 'Segment #1',\n          tracking_id: '1.2.826.0.1.3680043.8.498.12589743509522659746329052362277933345',\n          affected_organs: 'test',\n          volume: 212572.0,\n          axial_diameter: null,\n          coronal_diameter: null,\n          sagittal_diameter: null,\n          is_target_lession: true,\n          classification: null,\n          segmentation_type: \"('automatic', 'Automatic')\",\n          window_width: null,\n          window_level: null,\n          status: 'FINISHED',\n          lesion_segmentation: 'cdb7e7ae-222c-443d-a05b-50bf15d9fc48',\n          user: null,\n          reviewed_by: null,\n          model: null,\n          lesion_segments: [],\n        },\n        {\n          id: '11d44d33-ed98-4df7-8416-eedac863f1f2',\n          created_at: '2024-12-04T22:39:27.051787Z',\n          updated_at: '2024-12-04T22:39:27.051794Z',\n          is_deleted: false,\n          name: 'Segment #2',\n          label: 'Segment #2',\n          tracking_id: '1.2.826.0.1.3680043.8.498.14480479045670969767017487887829543474',\n          affected_organs: 'test',\n          volume: 319857.0,\n          axial_diameter: null,\n          coronal_diameter: null,\n          sagittal_diameter: null,\n          is_target_lession: true,\n          classification: null,\n          segmentation_type: \"('automatic', 'Automatic')\",\n          window_width: null,\n          window_level: null,\n          status: 'FINISHED',\n          lesion_segmentation: 'cdb7e7ae-222c-443d-a05b-50bf15d9fc48',\n          user: null,\n          reviewed_by: null,\n          model: null,\n          lesion_segments: ['cc679843-ad12-4ccd-9851-426664318e3c'],\n        },\n      ],\n      study_date: '2023-10-16T00:00:00Z',\n    },\n  ],\n};\n\nconst getSegmentations = async (studyId: string): Promise<SegmentationsResponse> => {\n  // console.log('studyId:', studyId);\n  // const response = await fetch(\n  //   'https://segmai.scian.cl/gateway_api/core/pipeline/api/v1/studies/segmentations/',\n  //   {\n  //     method: 'GET',\n  //     body: JSON.stringify({\n  //       study_id: studyId,\n  //     }),\n  //   }\n  // );\n  // console.log('response:', response);\n\n  // if (!response.ok) {\n  //   throw new Error(`Failed to fetch segmentations: ${response.statusText}`);\n  // }\n\n  // return response.json();\n\n  return exampleResponse;\n};\n\nconst api = {\n  getSegmentations,\n};\n\nexport default api;\n\nexport type { SegmentationsResponse, SegmentationData, Segment };\n","import { hotkeys } from '@ohif/core';\n// import { triggerEvent } from '@cornerstonejs/core';\nimport { Segment, Segmentation } from '@cornerstonejs/tools/types';\nimport { getRenderingEngine } from '@cornerstonejs/core';\nimport toolbarButtons from './toolbarButtons';\nimport segmentationButtons from './segmentationButtons';\nimport initToolGroups from './initToolGroups';\nimport { id } from './id';\nimport api from '../api';\nimport { SegmentationRepresentations } from '@cornerstonejs/tools/enums';\n\nconst ohif = {\n  layout: '@ohif/extension-default.layoutTemplateModule.viewerLayout',\n  sopClassHandler: '@ohif/extension-default.sopClassHandlerModule.stack',\n  thumbnailList: '@ohif/extension-default.panelModule.seriesList',\n  hangingProtocol: '@ohif/extension-default.hangingProtocolModule.default',\n};\n\nconst cornerstone = {\n  viewport: '@ohif/extension-cornerstone.viewportModule.cornerstone',\n  panelTool: '@ohif/extension-cornerstone.panelModule.panelSegmentationWithTools',\n};\n\nconst segmentation = {\n  sopClassHandler: '@ohif/extension-cornerstone-dicom-seg.sopClassHandlerModule.dicom-seg',\n  viewport: '@ohif/extension-cornerstone-dicom-seg.viewportModule.dicom-seg',\n};\n\nconst tchaii = {\n  hangingProtocol: 'extension-t-chaii.hangingProtocolModule.default',\n  segmentation: 'extension-t-chaii.panelModule.segmentation',\n};\n\nconst extensionDependencies = {\n  '@ohif/extension-default': '^3.0.0',\n  '@ohif/extension-cornerstone': '^3.0.0',\n  '@ohif/extension-cornerstone-dicom-seg': '^3.0.0',\n  'extension-t-chaii': '^0.0.1',\n};\n\nconst unsubscriptions: Array<() => void> = [];\n\nfunction modeFactory({ modeConfiguration }) {\n  return {\n    id,\n    routeName: 'ai-segmentations',\n    displayName: 'T-CHAII Mode',\n\n    onModeEnter: async ({ servicesManager, extensionManager, commandsManager }: withAppTypes) => {\n      const {\n        measurementService,\n        toolbarService,\n        toolGroupService,\n        displaySetService,\n        segmentationService,\n        cornerstoneViewportService,\n        customizationService,\n        viewportGridService,\n        hangingProtocolService,\n      } = servicesManager.services;\n\n      // Clear previous state\n      measurementService.clearMeasurements();\n\n      // Init Default and SR ToolGroups\n      initToolGroups(extensionManager, toolGroupService, commandsManager);\n\n      // Reset the tool state\n      toolbarService.addButtons(toolbarButtons);\n      toolbarService.addButtons(segmentationButtons);\n\n      // Add toolbar buttons\n      toolbarService.createButtonSection('primary', [\n        'WindowLevel',\n        'Pan',\n        'Zoom',\n        'TrackballRotate',\n        'Capture',\n        'Layout',\n        'Crosshairs',\n        'MoreTools',\n      ]);\n\n      toolbarService.createButtonSection('segmentationToolbox', ['BrushTools', 'Shapes']);\n\n      // Handle display sets added\n      const onViewportChanged = async ({ viewportData, viewportId }) => {\n        console.log('onDisplaySetsAdded', viewportData);\n\n        const displaySet = displaySetService.getDisplaySetByUID(\n          viewportData.data[viewportData.data.length - 1].displaySetInstanceUID\n        );\n\n        if (!displaySet) {\n          return;\n        }\n\n        if (displaySet.Modality !== 'SEG') {\n          return;\n        }\n\n        console.log('viewportId', viewportId);\n        console.log('displaySet', displaySet);\n        console.log(\n          'displaySet.referencedDisplaySetInstanceUID',\n          displaySet.referencedDisplaySetInstanceUID\n        );\n\n        const { segmentations_data } = await api.getSegmentations(displaySet.StudyInstanceUID);\n        console.log('segmentations_data', segmentations_data);\n\n        const segmentationsList = segmentationService.getSegmentations();\n        console.log('segmentationsList', segmentationsList);\n\n        const activeSegmentation = segmentationService.getActiveSegmentation(viewportId);\n        console.log('activeSegmentation', activeSegmentation);\n\n        const labelmaps = segmentationService.getSegmentationRepresentations(viewportId, {\n          type: SegmentationRepresentations.Labelmap,\n        });\n\n        console.log('labelmaps', labelmaps);\n\n        const segmentationId = segmentations_data.find(\n          segmentation => segmentation.segmentation_id === activeSegmentation.segmentationId\n        );\n        // const segmentationId = '3e3c9031-0eaf-602a-5459-1f3e541a3a1a';\n\n        const segmentation = segmentationService.getSegmentation(activeSegmentation.segmentationId);\n\n        if (!segmentation) {\n          return;\n        }\n\n        for (const [segmentIndex, segment] of Object.entries(segmentation.segments)) {\n          const additionalStats = {\n            diameter: 0, // mm\n            volume: 0, // mm3\n            affected_organs: 'Unknown',\n          };\n\n          // Update the segment's cached stats\n          const updatedSegment: Segment = {\n            ...segment,\n            cachedStats: {\n              ...segment.cachedStats,\n              ...additionalStats,\n            },\n          };\n\n          segmentation.segments[segmentIndex] = updatedSegment;\n        }\n\n        // Update the segmentation object\n        const updatedSegmentation: Segmentation = {\n          ...segmentation,\n          segments: {\n            ...segmentation.segments,\n          },\n        };\n\n        // Update the segmentation in the service\n        segmentationService.addOrUpdateSegmentation(updatedSegmentation);\n      };\n\n      // Subscribe to display sets added event\n\n      const displaySetsAddedUnsubscribe = cornerstoneViewportService.subscribe(\n        cornerstoneViewportService.EVENTS.VIEWPORT_DATA_CHANGED,\n        onViewportChanged\n      );\n\n      // Add to unsubscriptions for cleanup\n      unsubscriptions.push(displaySetsAddedUnsubscribe.unsubscribe);\n\n      // Add customizations\n      customizationService.addModeCustomizations([\n        {\n          id: 'PanelSegmentation.tableMode',\n          mode: 'expanded',\n        },\n      ]);\n    },\n\n    onModeExit: ({ servicesManager }: withAppTypes) => {\n      const {\n        toolGroupService,\n        syncGroupService,\n        segmentationService,\n        cornerstoneViewportService,\n        uiDialogService,\n        uiModalService,\n      } = servicesManager.services;\n\n      unsubscriptions.forEach(unsubscribe => unsubscribe());\n      uiDialogService.dismissAll();\n      uiModalService.hide();\n      toolGroupService.destroy();\n      syncGroupService.destroy();\n      segmentationService.destroy();\n      cornerstoneViewportService.destroy();\n    },\n\n    validationTags: {\n      study: [],\n      series: [],\n    },\n\n    isValidMode: ({ modalities }) => {\n      const modalities_list = modalities.split('\\\\');\n      return {\n        valid: modalities_list.includes('CT'),\n        description: 'T-CHAII mode only supports the CT modality',\n      };\n    },\n\n    routes: [\n      {\n        path: 'template',\n        layoutTemplate: ({ location, servicesManager }) => {\n          return {\n            id: ohif.layout,\n            props: {\n              leftPanels: [ohif.thumbnailList],\n              rightPanels: [tchaii.segmentation],\n              viewports: [\n                {\n                  namespace: cornerstone.viewport,\n                  displaySetsToDisplay: [ohif.sopClassHandler],\n                },\n                {\n                  namespace: segmentation.viewport,\n                  displaySetsToDisplay: [segmentation.sopClassHandler],\n                },\n              ],\n            },\n          };\n        },\n      },\n    ],\n    defaultContext: ['VIEWER'],\n    hangingProtocol: tchaii.hangingProtocol,\n    sopClassHandlers: [ohif.sopClassHandler, segmentation.sopClassHandler],\n    extensions: extensionDependencies,\n    hotkeys: [...hotkeys.defaults.hotkeyBindings],\n    ...modeConfiguration,\n  };\n}\n\nconst mode = {\n  id,\n  modeFactory,\n  extensionDependencies,\n};\n\nexport default mode;\n"],"names":["ChangeTypes","Events","SegmentationRepresentations","StrategyCallbacks","MouseBindings","KeyboardBindings","ToolModes","Swipe","AnnotationStyleStates","createButton","ToolbarService","ReferenceLinesListeners","commandName","context","setToolActiveToolbar","commandOptions","toolGroupIds","id","uiType","props","icon","label","commands","evaluate","type","name","disabledText","unsupportedViewportTypes","rows","columns","groupId","primary","tooltip","secondary","items","listeners","ViewportGridService","EVENTS","ACTIVE_VIEWPORT_ID_CHANGED","VIEWPORTS_READY","supportedModalities","toolNames","options","min","max","step","value","values","commandsManager","run","toolName","thresholdRangeOption","find","option","condition","colours","colorsByOrientation","axial","sagittal","coronal","createTools","utilityModule","Enums","exports","active","WindowLevel","bindings","mouseButton","Primary","Pan","Auxiliary","Zoom","Secondary","StackScroll","Wheel","passive","parentTool","configuration","activeStrategy","strategySpecificConfiguration","THRESHOLD","isDynamic","dynamicRadius","CircleScissors","RectangleScissors","SphereScissors","Magnify","WindowLevelRegion","UltrasoundDirectional","disabled","ReferenceLines","AdvancedMagnify","extensionManager","toolGroupService","toolGroupId","tools","getModuleEntry","createToolGroupAndAddTools","initDefaultToolGroup","servicesManager","_servicesManager","cornerstoneViewportService","services","push","Crosshairs","viewportIndicators","viewportIndicatorsConfig","circleRadius","xOffset","yOffset","disableOnPassive","autoPan","enabled","panSize","getReferenceLineColor","viewportId","viewportInfo","getViewportInfo","viewportOptions","orientation","console","warn","initMPRToolGroup","TrackballRotateTool","initVolume3DToolGroup","packageJson","exampleResponse","study_id_basal","segmentations_data","created_at","updated_at","is_deleted","segmentation_id","orthanc_id","status","series","segments","tracking_id","affected_organs","volume","axial_diameter","coronal_diameter","sagittal_diameter","is_target_lession","classification","segmentation_type","window_width","window_level","lesion_segmentation","user","reviewed_by","model","lesion_segments","study_date","getSegmentations","async","ohif","cornerstone","segmentation","tchaii","extensionDependencies","unsubscriptions","mode","modeFactory","modeConfiguration","routeName","displayName","onModeEnter","measurementService","toolbarService","displaySetService","segmentationService","customizationService","viewportGridService","hangingProtocolService","clearMeasurements","initToolGroups","addButtons","toolbarButtons","segmentationButtons","createButtonSection","displaySetsAddedUnsubscribe","subscribe","VIEWPORT_DATA_CHANGED","viewportData","log","displaySet","getDisplaySetByUID","data","length","displaySetInstanceUID","Modality","referencedDisplaySetInstanceUID","api","StudyInstanceUID","segmentationsList","activeSegmentation","getActiveSegmentation","labelmaps","getSegmentationRepresentations","Labelmap","segmentationId","getSegmentation","segmentIndex","segment","Object","entries","additionalStats","diameter","updatedSegment","cachedStats","updatedSegmentation","addOrUpdateSegmentation","unsubscribe","addModeCustomizations","onModeExit","syncGroupService","uiDialogService","uiModalService","forEach","dismissAll","hide","destroy","validationTags","study","isValidMode","modalities","valid","split","includes","description","routes","path","layoutTemplate","location","leftPanels","rightPanels","viewports","namespace","displaySetsToDisplay","defaultContext","hangingProtocol","sopClassHandlers","extensions","hotkeys","defaults","hotkeyBindings"],"sourceRoot":""}