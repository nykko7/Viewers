{"version":3,"file":"7955.bundle.6c6ac70987648f740da4.js","mappings":"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","sources":["webpack:///../../../modes/preclinical-4d/src/id.js","webpack:///../../../modes/preclinical-4d/src/getWorkflowSettings.ts","webpack:///../../../modes/preclinical-4d/src/initWorkflowSteps.ts","webpack:///../../../modes/preclinical-4d/src/initToolGroups.tsx","webpack:///../../../modes/preclinical-4d/src/toolbarButtons.tsx","webpack:///../../../modes/preclinical-4d/src/segmentationButtons.ts","webpack:///../../../modes/preclinical-4d/src/index.tsx"],"sourcesContent":["import packageJson from '../package.json';\n\nconst id = packageJson.name;\n\nexport { id };\n","const dynamicVolume = {\n  sopClassHandler:\n    '@ohif/extension-cornerstone-dynamic-volume.sopClassHandlerModule.dynamic-volume',\n  leftPanel: '@ohif/extension-cornerstone-dynamic-volume.panelModule.dynamic-volume',\n  segmentation: '@ohif/extension-cornerstone-dynamic-volume.panelModule.dynamic-segmentation',\n};\n\nconst cornerstone = {\n  segmentation: '@ohif/extension-cornerstone.panelModule.panelSegmentationNoHeader',\n  activeViewportWindowLevel: '@ohif/extension-cornerstone.panelModule.activeViewportWindowLevel',\n};\n\nconst defaultButtons = {\n  buttonSection: 'primary',\n  buttons: ['MeasurementTools', 'Zoom', 'WindowLevel', 'Crosshairs', 'Pan'],\n};\n\nconst defaultLeftPanel = [[dynamicVolume.leftPanel, cornerstone.activeViewportWindowLevel]];\n\nconst defaultLayout = {\n  panels: {\n    left: defaultLeftPanel,\n    right: [],\n  },\n};\n\nfunction getWorkflowSettings({ servicesManager }) {\n  return {\n    steps: [\n      {\n        id: 'dataPreparation',\n        name: 'Data Preparation',\n        layout: {\n          panels: {\n            left: defaultLeftPanel,\n          },\n        },\n        toolbarButtons: defaultButtons,\n        hangingProtocol: {\n          protocolId: 'default4D',\n          stageId: 'dataPreparation',\n        },\n        info: 'In the Data Preparation step, you can visualize the dynamic PT volume data in three orthogonal views: axial, sagittal, and coronal. Use the left panel controls to adjust the visualization settings, such as playback speed, or navigate between different frames. This step allows you to assess the quality of the PT data and prepare for further analysis or registration with other modalities.',\n      },\n      {\n        id: 'registration',\n        name: 'Registration',\n        layout: defaultLayout,\n        toolbarButtons: defaultButtons,\n        hangingProtocol: {\n          protocolId: 'default4D',\n          stageId: 'registration',\n        },\n        info: 'The Registration step provides a comprehensive view of the CT, PT, and fused CT-PT volume data in multiple orientations. The fusion viewports display the CT and PT volumes overlaid, allowing you to visually assess the alignment and registration between the two modalities. The individual CT and PT viewports are also available for side-by-side comparison. This step is crucial for ensuring proper registration before proceeding with further analysis or quantification.',\n      },\n      {\n        id: 'roiQuantification',\n        name: 'ROI Quantification',\n        layout: {\n          panels: {\n            left: defaultLeftPanel,\n            right: [[dynamicVolume.segmentation]],\n          },\n          options: {\n            leftPanelClosed: false,\n            rightPanelClosed: false,\n          },\n        },\n        toolbarButtons: [\n          defaultButtons,\n          {\n            buttonSection: 'dynamic-toolbox',\n            buttons: ['BrushTools', 'RectangleROIStartEndThreshold'],\n          },\n        ],\n        hangingProtocol: {\n          protocolId: 'default4D',\n          stageId: 'roiQuantification',\n        },\n        info: 'The ROI quantification step allows you to define regions of interest (ROIs) with labelmap segmentations, on the fused CT-PT volume data using the labelmap tools. The left panel provides controls for adjusting the dynamic volume visualization, while the right panel offers tools for segmentation, editing, and exporting the ROI data. This step enables you to quantify the uptake or other measures within the defined ROIs for further analysis.',\n      },\n      {\n        id: 'kineticAnalysis',\n        name: 'Kinetic Analysis',\n        layout: defaultLayout,\n        toolbarButtons: defaultButtons,\n        hangingProtocol: {\n          protocolId: 'default4D',\n          stageId: 'kineticAnalysis',\n        },\n        onEnter: [\n          {\n            commandName: 'updateSegmentationsChartDisplaySet',\n            options: { servicesManager },\n          },\n        ],\n        info: 'The Kinetic Analysis step provides a comprehensive view for visualizing and analyzing the dynamic data derived from the ROI segmentations. The fusion viewports display the combined CT-PT volume data, while a dedicated viewport shows a series chart representing the data over time. This step allows you to explore the temporal dynamics of the uptake or other kinetic measures within the defined regions of interest, enabling further quantitative analysis and modeling.',\n      },\n    ],\n  };\n}\n\nexport { getWorkflowSettings as default };\n","import getWorkflowSettings from './getWorkflowSettings';\n\nexport default function initWorkflowSteps({ servicesManager }: withAppTypes): void {\n  const { workflowStepsService } = servicesManager.services;\n  const workflowSettings = getWorkflowSettings({ servicesManager });\n\n  workflowStepsService.addWorkflowSteps(workflowSettings.steps);\n  workflowStepsService.setActiveWorkflowStep(workflowSettings.steps[0].id);\n}\n","const toolGroupIds = {\n  default: 'dynamic4D-default',\n  PT: 'dynamic4D-pt',\n  Fusion: 'dynamic4D-fusion',\n  CT: 'dynamic4D-ct',\n};\n\nconst colours = {\n  'viewport-0': 'rgb(200, 0, 0)',\n  'viewport-1': 'rgb(200, 200, 0)',\n  'viewport-2': 'rgb(0, 200, 0)',\n};\n\nconst colorsByOrientation = {\n  axial: 'rgb(200, 0, 0)',\n  sagittal: 'rgb(200, 200, 0)',\n  coronal: 'rgb(0, 200, 0)',\n};\n\nfunction _initToolGroups(toolNames, Enums, toolGroupService, commandsManager, servicesManager) {\n  const { cornerstoneViewportService } = servicesManager.services;\n  const tools = {\n    active: [\n      {\n        toolName: toolNames.WindowLevel,\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\n      },\n      {\n        toolName: toolNames.Pan,\n        bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\n      },\n      {\n        toolName: toolNames.Zoom,\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }],\n      },\n      {\n        toolName: toolNames.StackScroll,\n        bindings: [{ mouseButton: Enums.MouseBindings.Wheel }],\n      },\n    ],\n    passive: [\n      { toolName: toolNames.Length },\n      { toolName: toolNames.ArrowAnnotate },\n      { toolName: toolNames.Bidirectional },\n      { toolName: toolNames.Probe },\n      { toolName: toolNames.EllipticalROI },\n      { toolName: toolNames.RectangleROI },\n      { toolName: toolNames.RectangleROIThreshold },\n      { toolName: toolNames.RectangleScissors },\n      { toolName: toolNames.PaintFill },\n      { toolName: toolNames.StackScroll },\n      { toolName: toolNames.Magnify },\n      {\n        toolName: 'CircularBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'FILL_INSIDE_CIRCLE',\n          brushSize: 7,\n        },\n      },\n      {\n        toolName: 'CircularEraser',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'ERASE_INSIDE_CIRCLE',\n          brushSize: 7,\n        },\n      },\n      {\n        toolName: 'SphereBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'FILL_INSIDE_SPHERE',\n          brushSize: 7,\n        },\n      },\n      {\n        toolName: 'SphereEraser',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'ERASE_INSIDE_SPHERE',\n          brushSize: 7,\n        },\n      },\n      {\n        toolName: 'ThresholdCircularBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\n          brushSize: 7,\n        },\n      },\n      {\n        toolName: 'ThresholdSphereBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'THRESHOLD_INSIDE_SPHERE',\n          brushSize: 7,\n        },\n      },\n      { toolName: toolNames.CircleScissors },\n      { toolName: toolNames.RectangleScissors },\n      { toolName: toolNames.SphereScissors },\n      { toolName: toolNames.StackScroll },\n      { toolName: toolNames.Magnify },\n    ],\n    enabled: [],\n    disabled: [\n      {\n        toolName: toolNames.Crosshairs,\n        configuration: {\n          viewportIndicators: true,\n          viewportIndicatorsConfig: {\n            circleRadius: 5,\n            xOffset: 0.95,\n            yOffset: 0.05,\n          },\n          disableOnPassive: true,\n          autoPan: {\n            enabled: false,\n            panSize: 10,\n          },\n          getReferenceLineColor: viewportId => {\n            const viewportInfo = cornerstoneViewportService.getViewportInfo(viewportId);\n            const viewportOptions = viewportInfo?.viewportOptions;\n            if (viewportOptions) {\n              return (\n                colours[viewportOptions.id] ||\n                colorsByOrientation[viewportOptions.orientation] ||\n                '#0c0'\n              );\n            } else {\n              console.warn('missing viewport?', viewportId);\n              return '#0c0';\n            }\n          },\n        },\n      },\n    ],\n  };\n\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.PT, {\n    ...tools,\n    passive: [...tools.passive, { toolName: 'RectangleROIStartEndThreshold' }],\n  });\n\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.CT, {\n    ...tools,\n    passive: [...tools.passive, { toolName: 'RectangleROIStartEndThreshold' }],\n  });\n\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.Fusion, {\n    ...tools,\n    passive: [...tools.passive, { toolName: 'RectangleROIStartEndThreshold' }],\n  });\n\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.default, tools);\n}\n\nfunction initToolGroups({ toolNames, Enums, toolGroupService, commandsManager, servicesManager }) {\n  _initToolGroups(toolNames, Enums, toolGroupService, commandsManager, servicesManager);\n}\n\nexport { initToolGroups as default, toolGroupIds };\n","import { defaults, ToolbarService } from '@ohif/core';\nimport { toolGroupIds } from './initToolGroups';\n\nconst { createButton } = ToolbarService;\n\nconst setToolActiveToolbar = {\n  commandName: 'setToolActiveToolbar',\n  commandOptions: {\n    toolGroupIds: [toolGroupIds.PT, toolGroupIds.CT, toolGroupIds.Fusion, toolGroupIds.default],\n  },\n};\n\nconst toolbarButtons = [\n  {\n    id: 'MeasurementTools',\n    uiType: 'ohif.splitButton',\n    props: {\n      groupId: 'MeasurementTools',\n      evaluate: 'evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList',\n      primary: createButton({\n        id: 'Length',\n        icon: 'tool-length',\n        label: 'Length',\n        tooltip: 'Length Tool',\n        commands: setToolActiveToolbar,\n        evaluate: 'evaluate.cornerstoneTool',\n      }),\n      secondary: {\n        icon: 'chevron-down',\n        tooltip: 'More Measure Tools',\n      },\n      items: [\n        {\n          id: 'Length',\n          icon: 'tool-length',\n          label: 'Length',\n          tooltip: 'Length Tool',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        },\n        {\n          id: 'Bidirectional',\n          icon: 'tool-bidirectional',\n          label: 'Bidirectional',\n          tooltip: 'Bidirectional Tool',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        },\n        {\n          id: 'ArrowAnnotate',\n          icon: 'tool-annotate',\n          label: 'Annotation',\n          tooltip: 'Arrow Annotate',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        },\n        {\n          id: 'EllipticalROI',\n          icon: 'tool-ellipse',\n          label: 'Ellipse',\n          tooltip: 'Ellipse ROI',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        },\n      ],\n    },\n  },\n  {\n    id: 'Zoom',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-zoom',\n      label: 'Zoom',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'WindowLevel',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-window-level',\n      label: 'Window Level',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'Pan',\n    uiType: 'ohif.radioGroup',\n    props: {\n      type: 'tool',\n      icon: 'tool-move',\n      label: 'Pan',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'TrackballRotate',\n    uiType: 'ohif.radioGroup',\n    props: {\n      type: 'tool',\n      icon: 'tool-3d-rotate',\n      label: '3D Rotate',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'Capture',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-capture',\n      label: 'Capture',\n      commands: 'showDownloadViewportModal',\n      evaluate: [\n        'evaluate.action',\n        {\n          name: 'evaluate.viewport.supported',\n          unsupportedViewportTypes: ['video', 'wholeSlide'],\n        },\n      ],\n    },\n  },\n  {\n    id: 'Layout',\n    uiType: 'ohif.layoutSelector',\n    props: {\n      rows: 3,\n      columns: 4,\n      evaluate: 'evaluate.action',\n    },\n  },\n  {\n    id: 'Crosshairs',\n    uiType: 'ohif.radioGroup',\n    props: {\n      type: 'tool',\n      icon: 'tool-crosshair',\n      label: 'Crosshairs',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'ProgressDropdown',\n    uiType: 'ohif.progressDropdown',\n  },\n  {\n    id: 'RectangleROIStartEndThreshold',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-create-threshold',\n      label: 'Rectangle ROI Threshold',\n      commands: setToolActiveToolbar,\n      evaluate: {\n        name: 'evaluate.cornerstone.segmentation',\n        toolNames: ['RectangleROIStartEndThreshold'],\n      },\n      options: 'tmtv.RectangleROIThresholdOptions',\n    },\n  },\n];\n\nexport default toolbarButtons;\n","import type { Button } from '@ohif/core/types';\n\nconst toolbarButtons: Button[] = [\n  {\n    id: 'BrushTools',\n    uiType: 'ohif.buttonGroup',\n    props: {\n      groupId: 'BrushTools',\n      items: [\n        {\n          id: 'Brush',\n          icon: 'icon-tool-brush',\n          label: 'Brush',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['CircularBrush', 'SphereBrush'],\n          },\n          options: [\n            {\n              name: 'Size (mm)',\n              id: 'brush-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 7,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: { toolNames: ['CircularBrush', 'SphereBrush'] },\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'brush-mode',\n              value: 'CircularBrush',\n              values: [\n                { value: 'CircularBrush', label: 'Circle' },\n                { value: 'SphereBrush', label: 'Sphere' },\n              ],\n              commands: 'setToolActiveToolbar',\n            },\n          ],\n        },\n        {\n          id: 'Eraser',\n          icon: 'icon-tool-eraser',\n          label: 'Eraser',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['CircularEraser', 'SphereEraser'],\n          },\n          options: [\n            {\n              name: 'Radius (mm)',\n              id: 'eraser-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 7,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: { toolNames: ['CircularEraser', 'SphereEraser'] },\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'eraser-mode',\n              value: 'CircularEraser',\n              values: [\n                { value: 'CircularEraser', label: 'Circle' },\n                { value: 'SphereEraser', label: 'Sphere' },\n              ],\n              commands: 'setToolActiveToolbar',\n            },\n          ],\n        },\n        {\n          id: 'Threshold',\n          icon: 'icon-tool-threshold',\n          label: 'Eraser',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\n          },\n          options: [\n            {\n              name: 'Radius (mm)',\n              id: 'threshold-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 7,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: {\n                  toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\n                },\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'eraser-mode',\n              value: 'ThresholdCircularBrush',\n              values: [\n                { value: 'ThresholdCircularBrush', label: 'Circle' },\n                { value: 'ThresholdSphereBrush', label: 'Sphere' },\n              ],\n              commands: 'setToolActiveToolbar',\n            },\n            {\n              name: 'ThresholdRange',\n              type: 'double-range',\n              id: 'threshold-range',\n              min: 0,\n              max: 100,\n              step: 0.5,\n              value: [2, 50],\n              commands: {\n                commandName: 'setThresholdRange',\n                commandOptions: {\n                  toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\n                },\n              },\n            },\n          ],\n        },\n      ],\n    },\n  },\n  {\n    id: 'Shapes',\n    uiType: 'ohif.radioGroup',\n    props: {\n      label: 'Shapes',\n      evaluate: {\n        name: 'evaluate.cornerstone.segmentation',\n        toolNames: ['CircleScissor', 'SphereScissor', 'RectangleScissor'],\n      },\n      icon: 'icon-tool-shape',\n      options: [\n        {\n          name: 'Shape',\n          type: 'radio',\n          value: 'CircleScissor',\n          id: 'shape-mode',\n          values: [\n            { value: 'CircleScissor', label: 'Circle' },\n            { value: 'SphereScissor', label: 'Sphere' },\n            { value: 'RectangleScissor', label: 'Rectangle' },\n          ],\n          commands: 'setToolActiveToolbar',\n        },\n      ],\n    },\n  },\n];\n\nexport default toolbarButtons;\n","import { id } from './id';\nimport { hotkeys } from '@ohif/core';\nimport initWorkflowSteps from './initWorkflowSteps';\nimport initToolGroups from './initToolGroups';\nimport toolbarButtons from './toolbarButtons';\nimport segmentationButtons from './segmentationButtons';\n\nconst extensionDependencies = {\n  '@ohif/extension-default': '3.7.0-beta.76',\n  '@ohif/extension-cornerstone': '3.7.0-beta.76',\n  '@ohif/extension-cornerstone-dynamic-volume': '3.7.0-beta.76',\n  '@ohif/extension-cornerstone-dicom-seg': '3.7.0-beta.76',\n  '@ohif/extension-tmtv': '3.7.0-beta.76',\n};\n\nconst ohif = {\n  layout: '@ohif/extension-default.layoutTemplateModule.viewerLayout',\n  defaultSopClassHandler: '@ohif/extension-default.sopClassHandlerModule.stack',\n  chartSopClassHandler: '@ohif/extension-default.sopClassHandlerModule.chart',\n  hangingProtocol: '@ohif/extension-default.hangingProtocolModule.default',\n  leftPanel: '@ohif/extension-default.panelModule.seriesList',\n  rightPanel: '@ohif/extension-default.panelModule.measure',\n  chartViewport: '@ohif/extension-default.viewportModule.chartViewport',\n};\n\nconst dynamicVolume = {\n  leftPanel: '@ohif/extension-cornerstone-dynamic-volume.panelModule.dynamic-volume',\n};\n\nconst cornerstone = {\n  viewport: '@ohif/extension-cornerstone.viewportModule.cornerstone',\n  activeViewportWindowLevel: '@ohif/extension-cornerstone.panelModule.activeViewportWindowLevel',\n};\n\nfunction modeFactory({ modeConfiguration }) {\n  return {\n    id,\n    routeName: 'dynamic-volume',\n    displayName: 'Preclinical 4D',\n    onModeEnter: function ({ servicesManager, extensionManager, commandsManager }: withAppTypes) {\n      const {\n        measurementService,\n        toolbarService,\n        cineService,\n        cornerstoneViewportService,\n        toolGroupService,\n        customizationService,\n        viewportGridService,\n      } = servicesManager.services;\n\n      const utilityModule = extensionManager.getModuleEntry(\n        '@ohif/extension-cornerstone.utilityModule.tools'\n      );\n\n      const { toolNames, Enums } = utilityModule.exports;\n\n      measurementService.clearMeasurements();\n      initToolGroups({ toolNames, Enums, toolGroupService, commandsManager, servicesManager });\n\n      toolbarService.addButtons([...toolbarButtons, ...segmentationButtons]);\n      toolbarService.createButtonSection('secondary', ['ProgressDropdown']);\n\n      // the primary button section is created in the workflow steps\n      // specific to the step\n      customizationService.addModeCustomizations([\n        {\n          id: 'PanelSegmentation.tableMode',\n          mode: 'expanded',\n        },\n        {\n          id: 'PanelSegmentation.onSegmentationAdd',\n          onSegmentationAdd: () => {\n            commandsManager.run('createNewLabelMapForDynamicVolume');\n          },\n        },\n        {\n          id: 'PanelSegmentation.showAddSegment',\n          showAddSegment: false,\n        },\n        {\n          id: 'PanelSegmentation.readableText',\n          // remove following if you are not interested in that stats\n          readableText: {\n            lesionStats: 'Lesion Statistics',\n            minValue: 'Minimum Value',\n            maxValue: 'Maximum Value',\n            meanValue: 'Mean Value',\n            volume: 'Volume',\n            suvPeak: 'SUV Peak',\n            suvMax: 'Maximum SUV',\n            suvMaxIJK: 'SUV Max IJK',\n          },\n        },\n      ]);\n\n      // Auto play the clip initially when the volumes are loaded\n      const { unsubscribe } = cornerstoneViewportService.subscribe(\n        cornerstoneViewportService.EVENTS.VIEWPORT_VOLUMES_CHANGED,\n        () => {\n          const viewportId = viewportGridService.getActiveViewportId();\n          const csViewport = cornerstoneViewportService.getCornerstoneViewport(viewportId);\n          cineService.playClip(csViewport.element, { viewportId });\n          // cineService.setIsCineEnabled(true);\n\n          unsubscribe();\n        }\n      );\n    },\n    onSetupRouteComplete: ({ servicesManager }: withAppTypes) => {\n      // This needs to run after hanging protocol matching process because\n      // it may change the protocol/stage based on workflow stage settings\n      initWorkflowSteps({ servicesManager });\n    },\n    onModeExit: ({ servicesManager }: withAppTypes) => {\n      const {\n        toolGroupService,\n        syncGroupService,\n        segmentationService,\n        cornerstoneViewportService,\n      } = servicesManager.services;\n\n      toolGroupService.destroy();\n      syncGroupService.destroy();\n      segmentationService.destroy();\n      cornerstoneViewportService.destroy();\n    },\n    get validationTags() {\n      return {\n        study: [],\n        series: [],\n      };\n    },\n    isValidMode: ({ modalities, study }) => {\n      // Todo: we need to find a better way to validate the mode\n      return {\n        valid: study.mrn === 'M1',\n        description: 'This mode is only available for 4D PET/CT studies.',\n      };\n    },\n\n    /**\n     * Mode Routes are used to define the mode's behavior. A list of Mode Route\n     * that includes the mode's path and the layout to be used. The layout will\n     * include the components that are used in the layout. For instance, if the\n     * default layoutTemplate is used (id: '@ohif/extension-default.layoutTemplateModule.viewerLayout')\n     * it will include the leftPanels, rightPanels, and viewports. However, if\n     * you define another layoutTemplate that includes a Footer for instance,\n     * you should provide the Footer component here too. Note: We use Strings\n     * to reference the component's ID as they are registered in the internal\n     * ExtensionManager. The template for the string is:\n     * `${extensionId}.{moduleType}.${componentId}`.\n     */\n    routes: [\n      {\n        path: 'preclinical-4d',\n        layoutTemplate: ({ location, servicesManager }) => {\n          return {\n            id: ohif.layout,\n            props: {\n              leftPanels: [[dynamicVolume.leftPanel, cornerstone.activeViewportWindowLevel]],\n              rightPanels: [],\n              rightPanelClosed: true,\n              viewports: [\n                {\n                  namespace: cornerstone.viewport,\n                  displaySetsToDisplay: [ohif.defaultSopClassHandler],\n                },\n                {\n                  namespace: ohif.chartViewport,\n                  displaySetsToDisplay: [ohif.chartSopClassHandler],\n                },\n              ],\n            },\n          };\n        },\n      },\n    ],\n    extensions: extensionDependencies,\n    // Default protocol gets self-registered by default in the init\n    hangingProtocol: 'default4D',\n    // Order is important in sop class handlers when two handlers both use\n    // the same sop class under different situations.  In that case, the more\n    // general handler needs to come last.  For this case, the dicomvideo must\n    // come first to remove video transfer syntax before ohif uses images\n    sopClassHandlers: [ohif.chartSopClassHandler, ohif.defaultSopClassHandler],\n    hotkeys: [...hotkeys.defaults.hotkeyBindings],\n  };\n}\n\nconst mode = {\n  id,\n  modeFactory,\n  extensionDependencies,\n};\n\nexport default mode;\n"],"names":["id","packageJson","dynamicVolume","sopClassHandler","leftPanel","segmentation","defaultButtons","buttonSection","buttons","defaultLeftPanel","defaultLayout","panels","left","right","initWorkflowSteps","servicesManager","workflowStepsService","services","workflowSettings","steps","name","layout","toolbarButtons","hangingProtocol","protocolId","stageId","info","options","leftPanelClosed","rightPanelClosed","onEnter","commandName","getWorkflowSettings","addWorkflowSteps","setActiveWorkflowStep","toolGroupIds","default","PT","Fusion","CT","colours","colorsByOrientation","axial","sagittal","coronal","initToolGroups","toolNames","Enums","toolGroupService","commandsManager","cornerstoneViewportService","tools","active","toolName","WindowLevel","bindings","mouseButton","MouseBindings","Primary","Pan","Auxiliary","Zoom","Secondary","StackScroll","Wheel","passive","Length","ArrowAnnotate","Bidirectional","Probe","EllipticalROI","RectangleROI","RectangleROIThreshold","RectangleScissors","PaintFill","Magnify","parentTool","configuration","activeStrategy","brushSize","CircleScissors","SphereScissors","enabled","disabled","Crosshairs","viewportIndicators","viewportIndicatorsConfig","circleRadius","xOffset","yOffset","disableOnPassive","autoPan","panSize","getReferenceLineColor","viewportId","viewportInfo","getViewportInfo","viewportOptions","orientation","console","warn","createToolGroupAndAddTools","_initToolGroups","createButton","ToolbarService","setToolActiveToolbar","commandOptions","uiType","props","groupId","evaluate","primary","icon","label","tooltip","commands","secondary","items","type","unsupportedViewportTypes","rows","columns","min","max","step","value","values","extensionDependencies","ohif","cornerstone","modeFactory","modeConfiguration","routeName","displayName","onModeEnter","extensionManager","measurementService","toolbarService","cineService","customizationService","viewportGridService","utilityModule","getModuleEntry","exports","clearMeasurements","addButtons","segmentationButtons","createButtonSection","addModeCustomizations","mode","onSegmentationAdd","run","showAddSegment","readableText","lesionStats","minValue","maxValue","meanValue","volume","suvPeak","suvMax","suvMaxIJK","unsubscribe","subscribe","EVENTS","VIEWPORT_VOLUMES_CHANGED","getActiveViewportId","csViewport","getCornerstoneViewport","playClip","element","onSetupRouteComplete","onModeExit","syncGroupService","segmentationService","destroy","validationTags","study","series","isValidMode","modalities","valid","mrn","description","routes","path","layoutTemplate","location","leftPanels","rightPanels","viewports","namespace","displaySetsToDisplay","extensions","sopClassHandlers","hotkeys","defaults","hotkeyBindings"],"sourceRoot":""}