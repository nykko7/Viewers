(()=>{var e,t,a={66066:(e,t,a)=>{"use strict";var n=a(81985),o=a(55139),r=a(3823),i=a(58498),s=a(42008),c=a(99178);const l=({dimensions:e,origin:t,direction:a,spacing:o,metadata:r,scalarData:c})=>{const l=i.Ay.newInstance();l.setDimensions(e),l.setOrigin(t),l.setDirection(a),l.setSpacing(o);const d=s.Ay.newInstance({name:"Pixels",numberOfComponents:1,values:c});l.getPointData().setScalars(d),l.modified();return{imageData:l,spacing:o,origin:t,direction:a,metadata:r,voxelManager:n.utilities.VoxelManager.createScalarVolumeVoxelManager({scalarData:c,dimensions:e,numberOfComponents:1})}};const d={calculateSuvPeak:function({labelmapProps:e,referenceVolumeProps:t,annotations:a,segmentIndex:n=1}){const i=l(e),s=l(t);if("PT"!==s.metadata.Modality)return;const{dimensions:c,imageData:d}=i,{imageData:u}=s;let g;if(a?.length&&a[0].data?.cachedStats){const{projectionPoints:e}=a[0].data.cachedStats,t=[].concat(...e).map((e=>{const t=r.eR.fromValues(0,0,0);return u.worldToIndex(e,t),t}));g=o.utilities.boundingBox.getBoundingBoxAroundShape(t,c)}let p=0,f=[0,0,0],m=[0,0,0];i.voxelManager.forEach((({pointIJK:e,pointLPS:t})=>{if(i.voxelManager.getAtIJKPoint(e)!==n)return;const a=s.voxelManager.getAtIJKPoint(e);a>p&&(p=a,f=e,m=t)}),{boundsIJK:g,imageData:d,isInObject:()=>!0,returnPoints:!0});const b=d.getDirection().slice(0,3),v=2*(10*Math.pow(1/(4/3*Math.PI),1/3)),x=r.eR.create(),h=r.eR.create(),P=r.eR.create();u.indexToWorld(f,x),r.eR.scaleAndAdd(h,x,b,-v/2),r.eR.scaleAndAdd(P,x,b,v/2);const y=[h,P];let S=0,M=0;return o.utilities.pointInSurroundingSphereCallback(u,y,(({value:e})=>{M+=e,S+=1})),{max:p,maxIJK:f,maxLPS:m,mean:M/S}},calculateTMTV:function(e,t=1){const a=e.map((e=>l(e))),n=1===a.length?a[0]:o.utilities.segmentation.createMergedLabelmapForIndex(a),{imageData:r,spacing:i}=n;return.001*r.getPointData().getScalars().getData().reduce(((e,t)=>t>0?e+1:e),0)*i[0]*i[1]*i[2]},getTotalLesionGlycolysis:function({labelmapProps:e,referenceVolumeProps:t}){const a=e.map((e=>l(e))),n=1===a.length?a[0]:o.utilities.segmentation.createMergedLabelmapForIndex(a),{spacing:r}=a[0],i=l(t);let s=0,c=0;const d=n.voxelManager.getScalarDataLength();for(let e=0;e<d;e++)0!==n.voxelManager.getAtIndex(e)&&(s+=i.voxelManager.getAtIndex(e),c+=1);return s/c*c*r[0]*r[1]*r[2]*.001}};(0,c.p)(d)},89288:()=>{}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return a[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=a,o.x=()=>{var e=o.O(void 0,[149,5823,8523,5717],(()=>o(66066)));return e=o.O(e)},o.amdD=function(){throw new Error("define cannot be used indirect")},o.amdO={},e=[],o.O=(t,a,n,r)=>{if(!a){var i=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],r=e[d][2];for(var s=!0,c=0;c<a.length;c++)(!1&r||i>=r)&&Object.keys(o.O).every((e=>o.O[e](a[c])))?a.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,n,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,a)=>(o.f[a](e,t),t)),[])),o.u=e=>(572===e?"polySeg":e)+".bundle."+{149:"8c0fc29dcff2879457b8",572:"c263aa832136cfbdb732",5717:"b8aa8ab6825291a6bba0",5823:"ad3c4223fb59333a12f6",8523:"10d117d43a2dd1d9845f"}[e]+".js",o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.p="/viewer/",(()=>{o.b=self.location+"";var e={3584:1,572:1};o.f.i=(t,a)=>{e[t]||importScripts(o.p+o.u(t))};var t=self.webpackChunk=self.webpackChunk||[],a=t.push.bind(t);t.push=t=>{var n=t[0],r=t[1],i=t[2];for(var s in r)o.o(r,s)&&(o.m[s]=r[s]);for(i&&i(o);n.length;)e[n.pop()]=1;a(t)}})(),t=o.x,o.x=()=>Promise.all([149,5823,8523,5717].map(o.e,o)).then(t);o.x()})();
//# sourceMappingURL=suv-peak-worker.bundle.9476eec87eb28bc0c29a.js.map